---

# role-specific:auxiliary
########################################################################
#                                                                      #
# aux                                                                  #
#                                                                      #
########################################################################

aux_directory_default_owner: "{{ mash_playbook_user_username }}"
aux_directory_default_group: "{{ mash_playbook_user_groupname }}"

aux_file_default_owner: "{{ mash_playbook_user_username }}"
aux_file_default_group: "{{ mash_playbook_user_groupname }}"

########################################################################
#                                                                      #
# /aux                                                                 #
#                                                                      #
########################################################################
# /role-specific:auxiliary



# role-specific:ssh
########################################################################
#                                                                      #
# ssh                                                                  #
#                                                                      #
########################################################################

system_security_ssh_enabled: false

########################################################################
#                                                                      #
# /ssh                                                                 #
#                                                                      #
########################################################################
# /role-specific:ssh



# role-specific:fail2ban
########################################################################
#                                                                      #
# fail2ban                                                             #
#                                                                      #
########################################################################

system_security_fail2ban_enabled: false

########################################################################
#                                                                      #
# /fail2ban                                                            #
#                                                                      #
########################################################################
# /role-specific:fail2ban



# role-specific:swap
########################################################################
#                                                                      #
# swap                                                                 #
#                                                                      #
########################################################################

system_swap_enabled: false

########################################################################
#                                                                      #
# /swap                                                                #
#                                                                      #
########################################################################
# /role-specific:swap



# role-specific:systemd_service_manager
########################################################################
#                                                                      #
# systemd_service_manager                                              #
#                                                                      #
########################################################################

mash_playbook_devture_systemd_service_manager_services_list_auto_itemized:
  # Dummy entry, which is not role-specific.
  # Ensures there's at least one entry defined in the list.
  - "{{ omit }}"

  # role-specific:adguard_home
  - |-
    {{ ({'name': (adguard_home_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'adguard-home']} if adguard_home_enabled else omit) }}
  # /role-specific:adguard_home

  # role-specific:apisix_dashboard
  - |-
    {{ ({'name': (apisix_dashboard_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'apisix-dashboard']} if apisix_dashboard_enabled else omit) }}
  # /role-specific:apisix_dashboard

  # role-specific:apisix_gateway
  - |-
    {{ ({'name': (apisix_gateway_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'apisix-gateway']} if apisix_gateway_enabled else omit) }}
  # /role-specific:apisix_gateway

  # role-specific:appsmith
  - |-
    {{ ({'name': (appsmith_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'appsmith']} if appsmith_enabled else omit) }}
  # /role-specific:appsmith

  # role-specific:authelia
  - |-
    {{ ({'name': (authelia_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'authelia']} if authelia_enabled else omit) }}
  # /role-specific:authelia

  # role-specific:authentik
  - |-
    {{ ({'name': (authentik_server_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'authentik']} if authentik_enabled else omit) }}
  - |-
    {{ ({'name': (authentik_worker_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'authentik']} if authentik_enabled else omit) }}
  # /role-specific:authentik

  # role-specific:backup_borg
  - |-
    {{ ({'name': (backup_borg_identifier + '.timer'), 'priority': 5000, 'groups': ['mash', 'backup', 'borg']} if backup_borg_enabled else omit) }}
  # /role-specific:backup_borg

  # role-specific:calibre-web
  - |-
    {{ ({'name': (calibre_web_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'calibre-web']} if calibre_web_enabled else omit) }}
  # /role-specific:calibre-web

  # role-specific:changedetection
  - |-
    {{ ({'name': (changedetection_identifier + '.service'), 'priority': 2100, 'groups': ['mash', 'changedetection']} if changedetection_enabled else omit) }}
  - |-
    {{ ({'name': (changedetection_playwright_driver_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'changedetection']} if changedetection_playwright_driver_enabled else omit) }}
  # /role-specific:changedetection

  # role-specific:clickhouse
  - |-
    {{ ({'name': (clickhouse_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'clickhouse']} if clickhouse_enabled else omit) }}
  # /role-specific:clickhouse

  # role-specific:collabora_online
  - |-
    {{ ({'name': (collabora_online_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'collabora-online']} if collabora_online_enabled else omit) }}
  # /role-specific:collabora_online

  # role-specific:couchdb
  - |-
    {{ ({'name': (couchdb_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'couchdb']} if couchdb_enabled else omit) }}
  # /role-specific:couchdb

  # role-specific:container_socket_proxy
  - |-
    {{ ({'name': (container_socket_proxy_identifier + '.service'), 'priority': 200, 'groups': ['mash', 'reverse-proxies', 'container-socket-proxy']} if container_socket_proxy_enabled else omit) }}
  # /role-specific:container_socket_proxy

  # role-specific:docker_registry
  - |-
    {{ ({'name': (docker_registry_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'docker-registry']} if docker_registry_enabled else omit) }}
  - |-
    {{ ({'name': (docker_registry_identifier + '-garbage-collect.timer'), 'priority': 2500, 'groups': ['mash', 'docker-registry', 'docker-registry-gc']} if docker_registry_enabled else omit) }}
  # /role-specific:docker_registry

  # role-specific:docker_registry_browser
  - |-
    {{ ({'name': (docker_registry_browser_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'docker-registry-browser']} if docker_registry_browser_enabled else omit) }}
  # /role-specific:docker_registry_browser

  # role-specific:docker_registry_proxy
  - |-
    {{ ({'name': (docker_registry_proxy_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'docker-registry-proxy']} if docker_registry_proxy_enabled else omit) }}
  # /role-specific:docker_registry_proxy

  # role-specific:docker_registry_purger
  - |-
    {{ ({'name': (docker_registry_purger_identifier + '.timer'), 'priority': 3000, 'groups': ['mash', 'docker-registry-purger']} if docker_registry_purger_enabled else omit) }}
  # /role-specific:docker_registry_purger

  # role-specific:dokuwiki
  - |-
    {{ ({'name': (dokuwiki_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'dokuwiki']} if dokuwiki_enabled else omit) }}
  # /role-specific:dokuwiki

  # role-specific:echoip
  - |-
    {{ ({'name': (echoip_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'echoip']} if echoip_enabled else omit) }}
  # /role-specific:echoip

  # role-specific:endlessh
  - |-
    {{ ({'name': (endlessh_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'endlessh']} if endlessh_enabled else omit) }}
  # /role-specific:endlessh

  # role-specific:etcd
  - |-
    {{ ({'name': (etcd_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'etcd']} if etcd_enabled else omit) }}
  # /role-specific:etcd

  # role-specific:etherpad
  - |-
    {{ ({'name': (etherpad_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'etherpad']} if etherpad_enabled else omit) }}
  # /role-specific:etherpad

  # role-specific:exim_relay
  - |-
    {{ ({'name': (exim_relay_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'exim-relay']} if exim_relay_enabled else omit) }}
  # /role-specific:exim_relay

  # role-specific:firezone
  - |-
    {{ ({'name': (firezone_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'firezone']} if firezone_enabled else omit) }}
  # /role-specific:firezone

  # role-specific:focalboard
  - |-
    {{ ({'name': (focalboard_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'focalboard']} if focalboard_enabled else omit) }}
  # /role-specific:focalboard

  # role-specific:forgejo
  - |-
    {{ ({'name': (forgejo_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'forgejo', 'forgejo-server']} if forgejo_enabled else omit) }}
  # /role-specific:forgejo

  # role-specific:forgejo_runner
  - |-
    {{ ({'name': (forgejo_runner_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'forgejo-runner']} if forgejo_runner_enabled else omit) }}
  # /role-specific:forgejo_runner

  # role-specific:freescout
  - |-
    {{ ({'name': (freescout_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'freescout']} if freescout_enabled else omit) }}
  # /role-specific:freescout

  # role-specific:freshrss
  - |-
    {{ ({'name': (freshrss_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'freshrss']} if freshrss_enabled else omit) }}
  # /role-specific:freshrss

  # role-specific:funkwhale
  - |-
    {{ ({'name': (funkwhale_api_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'funkwhale']} if funkwhale_enabled else omit) }}
  - |-
    {{ ({'name': (funkwhale_frontend_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'funkwhale']} if funkwhale_enabled else omit) }}
  - |-
    {{ ({'name': (funkwhale_celery_beat_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'funkwhale']} if funkwhale_enabled else omit) }}
  - |-
    {{ ({'name': (funkwhale_celery_worker_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'funkwhale']} if funkwhale_enabled else omit) }}
  - |-
    {{ ({'name': (funkwhale_watch_imports_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'funkwhale']} if funkwhale_enabled and funkwhale_watch_imports_enabled else omit) }}
  # /role-specific:funkwhale

  # role-specific:gitea
  - |-
    {{ ({'name': (gitea_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'gitea', 'gitea-server']} if gitea_enabled else omit) }}
  # /role-specific:gitea

  # role-specific:gotosocial
  - |-
    {{ ({'name': (gotosocial_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'gotosocial']} if gotosocial_enabled else omit) }}
  # /role-specific:gotosocial

  # role-specific:grafana
  - |-
    {{ ({'name': (grafana_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'grafana']} if grafana_enabled else omit) }}
  # /role-specific:grafana

  # role-specific:headscale
  - |-
    {{ ({'name': (headscale_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'headscale']} if headscale_enabled else omit) }}
  # /role-specific:headscale

  # role-specific:healthchecks
  - |-
    {{ ({'name': (healthchecks_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'healthchecks']} if healthchecks_enabled else omit) }}
  # /role-specific:healthchecks

  # role-specific:hubsite
  - |-
    {{ ({'name': (hubsite_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'hubsite']} if hubsite_enabled else omit) }}
  # /role-specific:hubsite

  # role-specific:ihatemoney
  - |-
    {{ ({'name': (ihatemoney_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'ihatemoney']} if ihatemoney_enabled else omit) }}
  # /role-specific:ihatemoney

  # role-specific:ilmo
  - |-
    {{ ({'name': (ilmo_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'ilmo']} if ilmo_enabled else omit) }}
  # /role-specific:ilmo

  # role-specific:infisical
  - |-
    {{ ({'name': (infisical_identifier + '-backend.service'), 'priority': 2000, 'groups': ['mash', 'infisical', 'infisical-backend']} if infisical_enabled else omit) }}
  - |-
    {{ ({'name': (infisical_identifier + '-frontend.service'), 'priority': 2000, 'groups': ['mash', 'infisical', 'infisical-frontend']} if infisical_enabled else omit) }}
  # /role-specific:infisical

  # role-specific:influxdb
  - |-
    {{ ({'name': (influxdb_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'influxdb']} if influxdb_enabled else omit) }}
  # /role-specific:influxdb

  # role-specific:jackett
  - |-
    {{ ({'name': (jackett_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'jackett']} if jackett_enabled else omit) }}
  # /role-specific:jackett

  # role-specific:jitsi
  - |-
    {{ ({'name': (jitsi_identifier + '-web.service'), 'priority': 4200, 'groups': ['mash', 'jitsi', 'jitsi-web']} if jitsi_enabled else omit) }}
  - |-
    {{ ({'name': (jitsi_identifier + '-prosody.service'), 'priority': 4000, 'groups': ['mash', 'jitsi', 'jitsi-prosody']} if jitsi_enabled else omit) }}
  - |-
    {{ ({'name': (jitsi_identifier + '-jicofo.service'), 'priority': 4100, 'groups': ['mash', 'jitsi', 'jitsi-jicofo']} if jitsi_enabled else omit) }}
  - |-
    {{ ({'name': (jitsi_identifier + '-jvb.service'), 'priority': 4100, 'groups': ['mash', 'jitsi', 'jitsi-jvb']} if jitsi_enabled else omit) }}
  # /role-specific:jitsi

  # role-specific:joplin_server
  - |-
    {{ ({'name': (joplin_server_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'joplin-server']} if joplin_server_enabled else omit) }}
  # /role-specific:joplin_server

  # role-specific:keycloak
  - |-
    {{ ({'name': (keycloak_identifier + '.service'), 'priority': 1000, 'groups': ['mash', 'keycloak']} if keycloak_enabled else omit) }}
  # /role-specific:keycloak

  # role-specific:keydb
  - |-
    {{ ({'name': (keydb_identifier + '.service'), 'priority': 750, 'groups': ['mash', 'keydb']} if keydb_enabled else omit) }}
  # /role-specific:keydb

  # role-specific:labelstudio
  - |-
    {{ ({'name': (labelstudio_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'labelstudio']} if labelstudio_enabled else omit) }}
  # /role-specific:labelstudio

  # role-specific:lago
  - |-
    {{ ({'name': (lago_identifier + '-api.service'), 'priority': 2000, 'groups': ['mash', 'lago', 'lago-api']} if lago_enabled else omit) }}
  - |-
    {{ ({'name': (lago_identifier + '-api-worker.service'), 'priority': 2500, 'groups': ['mash', 'lago', 'lago-api-worker']} if lago_enabled else omit) }}
  - |-
    {{ ({'name': (lago_identifier + '-api-clock.service'), 'priority': 2500, 'groups': ['mash', 'lago', 'lago-api-clock']} if lago_enabled else omit) }}
  - |-
    {{ ({'name': (lago_identifier + '-front.service'), 'priority': 2200, 'groups': ['mash', 'lago', 'lago-front']} if lago_enabled else omit) }}
  - |-
    {{ ({'name': (lago_identifier + '-pdf.service'), 'priority': 1900, 'groups': ['mash', 'lago', 'lago-pdf']} if lago_enabled else omit) }}
  # /role-specific:lago

  # role-specific:languagetool
  - |-
    {{ ({'name': (languagetool_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'languagetool']} if languagetool_enabled else omit) }}
  # /role-specific:languagetool

  # role-specific:linkding
  - |-
    {{ ({'name': (linkding_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'linkding']} if linkding_enabled else omit) }}
  # /role-specific:linkding

  # role-specific:loki
  - |-
    {{ ({'name': (loki_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'loki']} if loki_enabled else omit) }}
  # /role-specific:loki

  # role-specific:mariadb
  - |-
    {{ ({'name': (mariadb_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'mariadb']} if mariadb_enabled else omit) }}
  # /role-specific:mariadb

  # role-specific:miniflux
  - |-
    {{ ({'name': (miniflux_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'miniflux']} if miniflux_enabled else omit) }}
  # /role-specific:miniflux

  # role-specific:mobilizon
  - |-
    {{ ({'name': (mobilizon_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'mobilizon']} if mobilizon_enabled else omit) }}
  # /role-specific:mobilizon

  # role-specific:mongodb
  - |-
    {{ ({'name': (mongodb_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'mongodb']} if mongodb_enabled else omit) }}
  # /role-specific:mongodb

  # role-specific:mosquitto
  - |-
    {{ ({'name': (mosquitto_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'mosquitto']} if mosquitto_enabled else omit) }}
  # /role-specific:mosquitto

  # role-specific:mrs
  - |-
    {{ ({'name': (mrs_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'mrs']} if mrs_enabled else omit) }}
  # /role-specific:mrs

  # role-specific:n8n
  - |-
    {{ ({'name': (n8n_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'n8n']} if n8n_enabled else omit) }}
  # /role-specific:n8n

  # role-specific:navidrome
  - |-
    {{ ({'name': (navidrome_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'navidrome']} if navidrome_enabled else omit) }}
  # /role-specific:navidrome

  # role-specific:neko
  - |-
    {{ ({'name': (neko_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'neko']} if neko_enabled else omit) }}
  # /role-specific:neko

  # role-specific:netbox
  - |-
    {{ ({'name': (netbox_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'netbox', 'netbox-server']} if netbox_enabled else omit) }}
  - |-
    {{ ({'name': (netbox_identifier + '-worker.service'), 'priority': 2500, 'groups': ['mash', 'netbox', 'netbox-worker']} if netbox_enabled else omit) }}
  - |-
    {{ ({'name': (netbox_identifier + '-housekeeping.service'), 'priority': 2500, 'groups': ['mash', 'netbox', 'netbox-housekeeping']} if netbox_enabled else omit) }}
  # /role-specific:netbox

  # role-specific:nextcloud
  - |-
    {{ ({'name': (nextcloud_identifier + '-server.service'), 'priority': 2000, 'groups': ['mash', 'nextcloud', 'nextcloud-server']} if nextcloud_enabled else omit) }}
  - |-
    {{ ({'name': (nextcloud_identifier + '-cron.timer'), 'priority': 2500, 'groups': ['mash', 'nextcloud', 'nextcloud-cron']} if nextcloud_enabled else omit) }}
  - |-
    {{ ({'name': (nextcloud_identifier + '-app-update.timer'), 'priority': 2500, 'groups': ['mash', 'nextcloud', 'nextcloud-app-update']} if nextcloud_enabled and nextcloud_auto_app_update_enabled else omit) }}
  # /role-specific:nextcloud

  # role-specific:notfellchen
  - |-
    {{ ({'name': (notfellchen_identifier  + '.service'), 'priority': 2000, 'groups': ['mash', 'notfellchen']} if notfellchen_enabled else omit) }}
  - |-
    {{ ({'name': (notfellchen_sws_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'notfellchen', 'notfellchen-sws']} if notfellchen_enabled else omit) }}
  - |-
    {{ ({'name': (notfellchen_celery_beat_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'notfellchen']} if notfellchen_enabled else omit) }}
  - |-
    {{ ({'name': (notfellchen_celery_worker_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'notfellchen']} if notfellchen_enabled else omit) }}
  # /role-specific:notfellchen

  # role-specific:ntfy
  - |-
    {{ ({'name': (ntfy_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'ntfy']} if ntfy_enabled else omit) }}
  # /role-specific:ntfy

  # role-specific:oauth2_proxy
  - |-
    {{ ({'name': (oauth2_proxy_identifier + '.service'), 'priority': 1900, 'groups': ['mash', 'oauth2-proxy']} if oauth2_proxy_enabled else omit) }}
  # /role-specific:oauth2_proxy

  # role-specific:outline
  - |-
    {{ ({'name': (outline_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'outline']} if outline_enabled else omit) }}
  # /role-specific:outline

  # role-specific:overseerr
  - |-
    {{ ({'name': (overseerr_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'overseerr']} if overseerr_enabled else omit) }}
  # /role-specific:overseerr

  # role-specific:owncast
  - |-
    {{ ({'name': (owncast_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'owncast']} if owncast_enabled else omit) }}
  # /role-specific:owncast

  # role-specific:oxitraffic
  - |-
    {{ ({'name': (oxitraffic_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'oxitraffic']} if oxitraffic_enabled else omit) }}
  # /role-specific:oxitraffic

  # role-specific:paperless
  - |-
    {{ ({'name': (paperless_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'paperless']} if paperless_enabled else omit) }}
  - |-
    {{ ({'name': (paperless_tika_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'paperless']} if paperless_enabled and paperless_tika_enabled else omit) }}
  - |-
    {{ ({'name': (paperless_gotenberg_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'paperless']} if paperless_enabled and paperless_gotenberg_enabled else omit) }}
  # /role-specific:paperless

  # role-specific:peertube
  - |-
    {{ ({'name': (peertube_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'peertube']} if peertube_enabled else omit) }}
  # /role-specific:peertube

  # role-specific:plausible
  - |-
    {{ ({'name': (plausible_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'plausible']} if plausible_enabled else omit) }}
  # /role-specific:plausible

  # role-specific:postgis
  - |-
    {{ ({'name': (postgis_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'metrics', 'postgis']} if postgis_enabled else omit) }}
  # /role-specific:postgis

  # role-specific:postgres
  - |-
    {{ ({'name': (postgres_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'postgres']} if postgres_enabled else omit) }}
  # /role-specific:postgres

  # role-specific:postgres_backup
  - |-
    {{ ({'name': (postgres_backup_identifier + '.service'), 'priority': 5000, 'groups': ['mash', 'backup', 'postgres-backup']} if postgres_backup_enabled else omit) }}
  # /role-specific:postgres_backup

  # role-specific:prometheus
  - |-
    {{ ({'name': (prometheus_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'metrics', 'prometheus']} if prometheus_enabled else omit) }}
  # /role-specific:prometheus

  # role-specific:prometheus_blackbox_exporter
  - |-
    {{ ({'name': (prometheus_blackbox_exporter_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'metrics', 'prometheus-blackbox-exporter']} if prometheus_blackbox_exporter_enabled else omit) }}
  # /role-specific:prometheus_blackbox_exporter

  # role-specific:prometheus_node_exporter
  - |-
    {{ ({'name': (prometheus_node_exporter_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'metrics', 'prometheus-node-exporter']} if prometheus_node_exporter_enabled else omit) }}
  # /role-specific:prometheus_node_exporter

  # role-specific:prometheus_postgres_exporter
  - |-
    {{ ({'name': (prometheus_postgres_exporter_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'metrics', 'prometheus-postgres-exporter']} if prometheus_postgres_exporter_enabled else omit) }}
  # /role-specific:prometheus_postgres_exporter

  # role-specific:prometheus_ssh_exporter
  - |-
    {{ ({'name': (prometheus_ssh_exporter_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'metrics', 'prometheus-ssh-exporter']} if prometheus_ssh_exporter_enabled else omit) }}
  # /role-specific:prometheus_ssh_exporter

  # role-specific:promtail
  - |-
    {{ ({'name': (promtail_identifier + '.service'), 'priority': 500, 'groups': ['mash', 'logs', 'promtail']} if promtail_enabled else omit) }}
  # /role-specific:promtail

  # role-specific:qbittorrent
  - |-
    {{ ({'name': (qbittorrent_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'qbittorrent']} if qbittorrent_enabled else omit) }}
  # /role-specific:qbittorrent

  # role-specific:radarr
  - |-
    {{ ({'name': (radarr_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'radarr']} if radarr_enabled else omit) }}
  # /role-specific:radarr

  # role-specific:radicale
  - |-
    {{ ({'name': (radicale_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'radicale']} if radicale_enabled else omit) }}
  # /role-specific:radicale

  # role-specific:readeck
  - |-
    {{ ({'name': (readeck_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'readeck']} if readeck_enabled else omit) }}
  # /role-specific:readeck

  # role-specific:redis
  - |-
    {{ ({'name': (redis_identifier + '.service'), 'priority': 750, 'groups': ['mash', 'redis']} if redis_enabled else omit) }}
  # /role-specific:redis

  # role-specific:redmine
  - |-
    {{ ({'name': (redmine_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'redmine']} if redmine_enabled else omit) }}
  - |-
    {{ ({'name': (redmine_identifier + '-send-reminders.timer'), 'priority': 2000, 'groups': ['mash', 'redmine']} if redmine_enabled else omit) }}
  - |-
    {{ ({'name': (redmine_identifier + '-recurring-tasks.timer'), 'priority': 2000, 'groups': ['mash', 'redmine']} if redmine_enabled and redmine_recurring_tasks_enabled else omit) }}
  # /role-specific:redmine

  # role-specific:roundcube
  - |-
    {{ ({'name': (roundcube_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'roundcube']} if roundcube_enabled else omit) }}
  # /role-specific:roundcube

  # role-specific:rumqttd
  - |-
    {{ ({'name': (rumqttd_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'rumqttd']} if rumqttd_enabled else omit) }}
  # /role-specific:rumqttd

  # role-specific:searxng
  - |-
    {{ ({'name': (searxng_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'searxng']} if searxng_enabled else omit) }}
  # /role-specific:searxng

  # role-specific:semaphore
  - |-
    {{ ({'name': (semaphore_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'semaphore']} if semaphore_enabled else omit) }}
  # /role-specific:semaphore

  # role-specific:send
  - |-
    {{ ({'name': (send_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'send']} if send_enabled else omit) }}
  # /role-specific:send

  # role-specific:soft_serve
  - |-
    {{ ({'name': (soft_serve_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'soft-serve']} if soft_serve_enabled else omit) }}
  # /role-specific:soft_serve

  # role-specific:sonarr
  - |-
    {{ ({'name': (sonarr_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'sonarr']} if sonarr_enabled else omit) }}
  # /role-specific:sonarr

  # role-specific:stirling_pdf
  - |-
    {{ ({'name': (stirling_pdf_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'stirling_pdf']} if stirling_pdf_enabled else omit) }}
  # /role-specific:stirling_pdf

  # role-specific:syncthing
  - |-
    {{ ({'name': (syncthing_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'syncthing']} if syncthing_enabled else omit) }}
  # /role-specific:syncthing

  # role-specific:tandoor
  - |-
    {{ ({'name': (tandoor_api_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'tandoor']} if tandoor_enabled else omit) }}
  - |-
    {{ ({'name': (tandoor_frontend_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'tandoor']} if tandoor_enabled else omit) }}
  # /role-specific:tandoor

  # role-specific:telegraf
  - |-
    {{ ({'name': (telegraf_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'telegraf']} if telegraf_enabled else omit) }}
  # /role-specific:telegraf

  # role-specific:traefik
  - |-
    {{ ({'name': (traefik_identifier + '.service'), 'priority': 250, 'groups': ['mash', 'traefik', 'reverse-proxies']} if traefik_enabled else omit) }}
  # /role-specific:traefik

  # role-specific:tsdproxy
  - |-
    {{ ({'name': (tsdproxy_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'tsdproxy']} if tsdproxy_enabled else omit) }}
  # /role-specific:tsdproxy

  # role-specific:uptime_kuma
  - |-
    {{ ({'name': (uptime_kuma_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'uptime-kuma']} if uptime_kuma_enabled else omit) }}
  # /role-specific:uptime_kuma

  # role-specific:valkey
  - |-
    {{ ({'name': (valkey_identifier + '.service'), 'priority': 750, 'groups': ['mash', 'valkey']} if valkey_enabled else omit) }}
  # /role-specific:valkey

  # role-specific:vaultwarden
  - |-
    {{ ({'name': (vaultwarden_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'vaultwarden', 'vaultwarden-server']} if vaultwarden_enabled else omit) }}
  # /role-specific:vaultwarden

  # role-specific:wetty
  - |-
    {{ ({'name': (wetty_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'wetty']} if wetty_enabled else omit) }}
  # /role-specific:wetty

  # role-specific:wg_easy
  - |-
    {{ ({'name': (wg_easy_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'wg-easy']} if wg_easy_enabled else omit) }}
  # /role-specific:wg_easy

  # role-specific:woodpecker_ci_agent
  - |-
    {{ ({'name': (woodpecker_ci_agent_identifier + '.service'), 'priority': 4100, 'groups': ['mash', 'woodpecker', 'ci', 'woodpecker-ci-agent']} if woodpecker_ci_agent_enabled else omit) }}
  # /role-specific:woodpecker_ci_agent

  # role-specific:woodpecker_ci_server
  - |-
    {{ ({'name': (woodpecker_ci_server_identifier + '.service'), 'priority': 4000, 'groups': ['mash', 'woodpecker', 'ci', 'woodpecker-ci-server']} if woodpecker_ci_server_enabled else omit) }}
  # /role-specific:woodpecker_ci_server

  # role-specific:wordpress
  - |-
    {{ ({'name': (wordpress_identifier + '.service'), 'priority': 2000, 'groups': ['mash', 'wordpress']} if wordpress_enabled else omit) }}
  # /role-specific:wordpress

  # role-specific:writefreely
  - |-
    {{ ({'name': (writefreely_identifier  + '.service'), 'priority': 2000, 'groups': ['mash', 'writefreely']} if writefreely_enabled else omit) }}
  # /role-specific:writefreely

  # role-specific:yourls
  - |-
    {{ ({'name': (yourls_identifier  + '.service'), 'priority': 2000, 'groups': ['mash', 'yourls']} if yourls_enabled else omit) }}
  # /role-specific:yourls

devture_systemd_service_manager_services_list_auto: "{{ mash_playbook_devture_systemd_service_manager_services_list_auto_itemized | reject('equalto', omit) }}"

########################################################################
#                                                                      #
# /systemd_service_manager                                             #
#                                                                      #
########################################################################
# /role-specific:systemd_service_manager


# role-specific:postgres
########################################################################
#                                                                      #
# postgres                                                             #
#                                                                      #
########################################################################

postgres_enabled: false

postgres_identifier: "{{ mash_playbook_service_identifier_prefix }}postgres"

postgres_architecture: "{{ mash_playbook_architecture }}"

postgres_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}postgres"

postgres_uid: "{{ mash_playbook_uid }}"
postgres_gid: "{{ mash_playbook_gid }}"

# This includes everything for maximum safety.
# It may not be optimal though, because some services may not be dependant on Postgres at all, etc.
postgres_systemd_services_to_stop_for_maintenance_list_auto: "{{ devture_systemd_service_manager_services_list_auto | map(attribute='name') | reject('equalto', (postgres_identifier + '.service')) }}"

mash_playbook_postgres_managed_databases_auto_itemized:
  # Dummy entry, which is not role-specific.
  # Ensures there's at least one entry defined in the list.
  - "{{ omit }}"

  # role-specific:authelia
  - |-
    {{
      ({
        'name': authelia_config_storage_postgres_database,
        'username': authelia_config_storage_postgres_username,
        'password': authelia_config_storage_postgres_password,
      } if authelia_enabled and authelia_config_storage_postgres_host == postgres_identifier else omit)
    }}
  # /role-specific:authelia

  # role-specific:authentik
  - |-
    {{
      ({
        'name': authentik_database_name,
        'username': authentik_database_username,
        'password': authentik_database_password,
      } if authentik_enabled and authentik_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:authentik

  # role-specific:etherpad
  - |-
    {{
      ({
        'name': etherpad_database_name,
        'username': etherpad_database_username,
        'password': etherpad_database_password,
      } if etherpad_enabled else omit)
    }}
  # /role-specific:etherpad

  # role-specific:focalboard
  - |-
    {{
      ({
        'name': focalboard_database_name,
        'username': focalboard_database_username,
        'password': focalboard_database_password,
      } if focalboard_enabled and focalboard_database_type == 'postgres' and focalboard_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:focalboard

  # role-specific:freshrss
  - |-
    {{
      ({
        'name': freshrss_database_name,
        'username': freshrss_database_username,
        'password': freshrss_database_password,
      } if freshrss_enabled and freshrss_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:freshrss

  # role-specific:funkwhale
  - |-
    {{
      ({
        'name': funkwhale_database_name,
        'username': funkwhale_database_username,
        'password': funkwhale_database_password,
      } if funkwhale_enabled and funkwhale_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:funkwhale

  # role-specific:gitea
  - |-
    {{
      ({
        'name': gitea_config_database_name,
        'username': gitea_config_database_username,
        'password': gitea_config_database_password,
      } if gitea_enabled else omit)
    }}
  # /role-specific:gitea

  # role-specific:healthchecks
  - |-
    {{
      ({
        'name': healthchecks_database_name,
        'username': healthchecks_database_username,
        'password': healthchecks_database_password,
      } if healthchecks_enabled and healthchecks_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:healthchecks

  # role-specific:joplin_server
  - |-
    {{
      ({
        'name': joplin_server_environment_variable_database_name,
        'username': joplin_server_environment_variable_database_user,
        'password': joplin_server_environment_variable_database_password,
      } if joplin_server_enabled else omit)
    }}
  # /role-specific:joplin_server

  # role-specific:woodpecker_ci_server
  - |-
    {{
      ({
        'name': woodpecker_ci_server_database_datasource_db_name,
        'username': woodpecker_ci_server_database_datasource_username,
        'password': woodpecker_ci_server_database_datasource_password,
      } if woodpecker_ci_server_enabled else omit)
    }}
  # /role-specific:woodpecker_ci_server

  # role-specific:gotosocial
  - |-
    {{
      ({
        'name': gotosocial_database_name,
        'username': gotosocial_database_username,
        'password': gotosocial_database_password,
      } if gotosocial_enabled else omit)
    }}
  # /role-specific:gotosocial

  # role-specific:ihatemoney
  - |-
    {{
      ({
        'name': ihatemoney_database_name,
        'username': ihatemoney_database_username,
        'password': ihatemoney_database_password,
      } if ihatemoney_enabled else omit)
    }}
  # /role-specific:ihatemoney


  # role-specific:ilmo
  - |-
    {{
      ({
        'name': ilmo_database_name,
        'username': ilmo_database_username,
        'password': ilmo_database_password,
      } if ilmo_enabled else omit)
    }}
  # /role-specific:ilmo

  # role-specific:keycloak
  - |-
    {{
      ({
        'name': keycloak_database_name,
        'username': keycloak_database_username,
        'password': keycloak_database_password,
      } if keycloak_enabled and keycloak_database_type == 'postgres' and keycloak_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:keycloak

  # role-specific:labelstudio
  - |-
    {{
      ({
        'name': labelstudio_database_name,
        'username': labelstudio_database_username,
        'password': labelstudio_database_password,
      } if labelstudio_enabled and labelstudio_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:labelstudio

  # role-specific:lago
  - |-
    {{
      ({
        'name': lago_database_name,
        'username': lago_database_username,
        'password': lago_database_password,
      } if lago_enabled and lago_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:lago

  # role-specific:linkding
  - |-
    {{
      ({
        'name': linkding_database_name,
        'username': linkding_database_username,
        'password': linkding_database_password,
      } if linkding_enabled and linkding_database_engine == 'postgres' else omit)
    }}
  # /role-specific:linkding

  # role-specific:freescout
  - |-
    {{
      ({
        'name': freescout_database_name,
        'username': freescout_database_username,
        'password': freescout_database_password,
      } if freescout_enabled else omit)
    }}
  # /role-specific:freescout

  # role-specific:miniflux
  - |-
    {{
      ({
        'name': miniflux_database_name,
        'username': miniflux_database_username,
        'password': miniflux_database_password,
      } if miniflux_enabled else omit)
    }}
  # /role-specific:miniflux

  # role-specific:redmine
  - |-
    {{
      ({
        'name': redmine_database_name,
        'username': redmine_database_username,
        'password': redmine_database_password,
      } if redmine_enabled else omit)
    }}
  # /role-specific:redmine

  # role-specific:n8n
  - |-
    {{
      ({
        'name': n8n_database_name,
        'username': n8n_database_username,
        'password': n8n_database_password,
      } if n8n_enabled else omit)
    }}
  # /role-specific:n8n

  # role-specific:netbox
  - |-
    {{
      ({
        'name': netbox_database_name,
        'username': netbox_database_username,
        'password': netbox_database_password,
      } if netbox_enabled else omit)
    }}
  # /role-specific:netbox

  # role-specific:nextcloud
  - |-
    {{
      ({
        'name': nextcloud_database_name,
        'username': nextcloud_database_username,
        'password': nextcloud_database_password,
      } if nextcloud_enabled else omit)
    }}
  # /role-specific:nextcloud

  # role-specific:notfellchen
  - |-
    {{
      ({
        'name': notfellchen_database_name,
        'username': notfellchen_database_username,
        'password': notfellchen_database_password,
      } if notfellchen_enabled else omit)
    }}
  # /role-specific:notfellchen

  # role-specific:outline
  - |-
    {{
      ({
        'name': outline_database_name,
        'username': outline_database_username,
        'password': outline_database_password,
      } if outline_enabled and outline_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:outline

  # role-specific:oxitraffic
  - |-
    {{
      ({
        'name': oxitraffic_database_name,
        'username': oxitraffic_database_username,
        'password': oxitraffic_database_password,
      } if oxitraffic_enabled and oxitraffic_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:oxitraffic


  # role-specific:paperless
  - |-
    {{
      ({
        'name': paperless_database_name,
        'username': paperless_database_username,
        'password': paperless_database_password,
      } if paperless_enabled and paperless_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:paperless

  # role-specific:peertube
  - |-
    {{
      ({
        'name': peertube_config_database_name,
        'username': peertube_config_database_username,
        'password': peertube_config_database_password,
      } if peertube_enabled else omit)
    }}
  # /role-specific:peertube

  # role-specific:plausible
  - |-
    {{
      ({
        'name': plausible_database_name,
        'username': plausible_database_username,
        'password': plausible_database_password,
      } if plausible_enabled else omit)
    }}
  # /role-specific:plausible

  # role-specific:prometheus_postgres_exporter
  - |-
    {{
      ({
        'name': prometheus_postgres_exporter_database_name,
        'username': prometheus_postgres_exporter_database_username,
        'password': prometheus_postgres_exporter_database_password,
      } if prometheus_postgres_exporter_enabled else omit)
    }}
  # /role-specific:prometheus_postgres_exporter

  # role-specific:firezone
  - |-
    {{
      ({
        'name': firezone_database_name,
        'username': firezone_database_username,
        'password': firezone_database_password,
      } if firezone_enabled else omit)
    }}
  # /role-specific:firezone

  # role-specific:vaultwarden
  - |-
    {{
      ({
        'name': vaultwarden_database_name,
        'username': vaultwarden_database_username,
        'password': vaultwarden_database_password,
      } if vaultwarden_enabled else omit)
    }}
  # /role-specific:vaultwarden

  # role-specific:forgejo
  - |-
    {{
      ({
        'name': forgejo_config_database_name,
        'username': forgejo_config_database_username,
        'password': forgejo_config_database_password,
      } if forgejo_enabled else omit)
    }}
  # /role-specific:forgejo

  # role-specific:roundcube
  - |-
    {{
      ({
        'name': roundcube_database_name,
        'username': roundcube_database_username,
        'password': roundcube_database_password,
      } if roundcube_enabled and roundcube_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:roundcube

  # role-specific:semaphore
  - |-
    {{
      ({
        'name': semaphore_database_name,
        'username': semaphore_database_username,
        'password': semaphore_database_password,
      } if semaphore_enabled and semaphore_database_host == postgres_identifier else omit)
    }}
  # /role-specific:semaphore

  # role-specific:tandoor
  - |-
    {{
      ({
        'name': tandoor_database_name,
        'username': tandoor_database_username,
        'password': tandoor_database_password,
      } if tandoor_enabled and tandoor_database_hostname == postgres_identifier else omit)
    }}
  # /role-specific:tandoor

postgres_managed_databases_auto: "{{ mash_playbook_postgres_managed_databases_auto_itemized | reject('equalto', omit) }}"

########################################################################
#                                                                      #
# /postgres                                                            #
#                                                                      #
########################################################################
# /role-specific:postgres


# role-specific:postgres_backup
########################################################################
#                                                                      #
# postgres_backup                                                      #
#                                                                      #
########################################################################

postgres_backup_enabled: false

postgres_backup_postgres_role_include_name: galaxy/postgres

postgres_backup_identifier: "{{ mash_playbook_service_identifier_prefix }}postgres-backup"

postgres_backup_architecture: "{{ mash_playbook_architecture }}"

postgres_backup_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}postgres-backup"

postgres_backup_uid: "{{ mash_playbook_uid }}"
postgres_backup_gid: "{{ mash_playbook_gid }}"

# role-specific:postgres
postgres_backup_systemd_required_services_list_auto: |
  {{
    ([(postgres_identifier + '.service')] if (postgres_enabled and postgres_backup_connection_hostname == postgres_connection_hostname) else [])
  }}

postgres_backup_container_network: "{{ (postgres_container_network if (postgres_enabled and postgres_backup_connection_hostname == postgres_connection_hostname) else postgres_backup_identifier) }}"

postgres_backup_container_additional_networks_auto: |-
  {{
      ([postgres_container_network] if (postgres_enabled and postgres_backup_connection_hostname == postgres_connection_hostname and postgres_backup_container_network != postgres_container_network) else [])
  }}

postgres_backup_connection_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
postgres_backup_connection_port: "{{ postgres_connection_port if postgres_enabled else 5432 }}"
postgres_backup_connection_username: "{{ postgres_connection_username if postgres_enabled else '' }}"
postgres_backup_connection_password: "{{ postgres_connection_password if postgres_enabled else '' }}"

postgres_backup_postgres_data_path: "{{ postgres_data_path if postgres_enabled else '' }}"

postgres_backup_databases_auto: "{{ postgres_managed_databases | map(attribute='name') if postgres_enabled else [] }}"
# /role-specific:postgres

########################################################################
#                                                                      #
# /postgres_backup                                                     #
#                                                                      #
########################################################################
# /role-specific:postgres_backup


# role-specific:playbook_state_preserver
########################################################################
#                                                                      #
# playbook_state_preserver                                             #
#                                                                      #
########################################################################

# To completely disable this feature, use `devture_playbook_state_preserver_enabled: false`.

devture_playbook_state_preserver_uid: "{{ mash_playbook_uid }}"
devture_playbook_state_preserver_gid: "{{ mash_playbook_gid }}"

devture_playbook_state_preserver_vars_preservation_dst: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}vars.yml"

devture_playbook_state_preserver_commit_hash_preservation_dst: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}git_hash.yml"

########################################################################
#                                                                      #
# /playbook_state_preserver                                            #
#                                                                      #
########################################################################
# /role-specific:playbook_state_preserver



########################################################################
#                                                                      #
# geerlingguy/ansible-role-docker                                      #
#                                                                      #
########################################################################

docker_daemon_options: "{{ mash_playbook_docker_installation_daemon_options }}"

########################################################################
#                                                                      #
# /geerlingguy/ansible-role-docker                                     #
#                                                                      #
########################################################################



# role-specific:container_socket_proxy
########################################################################
#                                                                      #
# container_socket_proxy                                               #
#                                                                      #
########################################################################

container_socket_proxy_enabled: "{{ traefik_enabled }}"

container_socket_proxy_identifier: "{{ mash_playbook_service_identifier_prefix }}container-socket-proxy"

container_socket_proxy_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}container-socket-proxy"

container_socket_proxy_uid: "{{ mash_playbook_uid }}"
container_socket_proxy_gid: "{{ mash_playbook_gid }}"

# Traefik requires read access to the containers APIs to do its job
container_socket_proxy_api_containers_enabled: true

########################################################################
#                                                                      #
# /container_socket_proxy                                              #
#                                                                      #
########################################################################
# /role-specific:container_socket_proxy



# role-specific:traefik
########################################################################
#                                                                      #
# traefik                                                              #
#                                                                      #
########################################################################

traefik_enabled: "{{ mash_playbook_reverse_proxy_type == 'playbook-managed-traefik' }}"

traefik_identifier: "{{ mash_playbook_service_identifier_prefix }}traefik"

traefik_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}traefik"

traefik_uid: "{{ mash_playbook_uid }}"
traefik_gid: "{{ mash_playbook_gid }}"

traefik_container_additional_networks_auto: |
  {{
    ([container_socket_proxy_container_network] if container_socket_proxy_enabled | default(false) else [])
  }}

traefik_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([container_socket_proxy_identifier + '.service'] if container_socket_proxy_enabled | default(false) else [])
  }}

# role-specific:container_socket_proxy
traefik_config_providers_docker_endpoint: "{{ container_socket_proxy_endpoint if container_socket_proxy_enabled else 'unix:///var/run/docker.sock' }}"
# /role-specific:container_socket_proxy

########################################################################
#                                                                      #
# /traefik                                                             #
#                                                                      #
########################################################################
# /role-specific:traefik



# role-specific:docker_sdk_for_python
########################################################################
#                                                                      #
# docker_sdk_for_python                                                #
#                                                                      #
########################################################################

devture_docker_sdk_for_python_installation_enabled: false

########################################################################
#                                                                      #
# /docker_sdk_for_python                                               #
#                                                                      #
########################################################################
# /role-specific:docker_sdk_for_python



# role-specific:timesync
########################################################################
#                                                                      #
# timesync                                                             #
#                                                                      #
########################################################################

# To completely disable installing systemd-timesyncd/ntpd, use `devture_timesync_installation_enabled: false`.

devture_timesync_installation_enabled: false

########################################################################
#                                                                      #
# /timesync                                                            #
#                                                                      #
########################################################################
# /role-specific:timesync



# role-specific:adguard_home
########################################################################
#                                                                      #
# adguard-home                                                         #
#                                                                      #
########################################################################

adguard_home_enabled: false

adguard_home_identifier: "{{ mash_playbook_service_identifier_prefix }}adguard-home"

adguard_home_uid: "{{ mash_playbook_uid }}"
adguard_home_gid: "{{ mash_playbook_gid }}"

adguard_home_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}adguard-home"

adguard_home_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

adguard_home_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
adguard_home_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
adguard_home_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
adguard_home_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /adguard-home                                                        #
#                                                                      #
########################################################################
# /role-specific:adguard_home



# role-specific:apisix_dashboard
########################################################################
#                                                                      #
# apisix_dashboard                                                       #
#                                                                      #
########################################################################

apisix_dashboard_enabled: false

apisix_dashboard_identifier: "{{ mash_playbook_service_identifier_prefix }}apisix-dashboard"

apisix_dashboard_uid: "{{ mash_playbook_uid }}"
apisix_dashboard_gid: "{{ mash_playbook_gid }}"

apisix_dashboard_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}apisix-dashboard"

apisix_dashboard_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if (mash_playbook_reverse_proxyable_services_additional_network and apisix_dashboard_container_labels_traefik_enabled) else [])
  }}

apisix_dashboard_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
apisix_dashboard_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:etcd
apisix_dashboard_config_conf_etcd_endpoints: |
  {{
    ([(etcd_identifier + ':2379')] if etcd_enabled else [])
  }}

apisix_dashboard_config_conf_etcd_username: "{{ ('root' if (etcd_enabled and not etcd_environment_variable_allow_none_authentication) else '') }}"
apisix_dashboard_config_conf_etcd_password: "{{ (etcd_environment_variable_etcd_root_password if (etcd_enabled and not etcd_environment_variable_allow_none_authentication) else '') }}"

apisix_dashboard_container_additional_networks_custom: |
  {{
    ([etcd_container_network] if etcd_enabled else [])
  }}

apisix_dashboard_systemd_required_systemd_services_list_auto: |
  {{
    ([(etcd_identifier + '.service')] if etcd_enabled else [])
  }}
# /role-specific:etcd

# role-specific:traefik
apisix_dashboard_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
apisix_dashboard_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /apisix_dashboard                                                      #
#                                                                      #
########################################################################
# /role-specific:apisix_dashboard



# role-specific:apisix_gateway
########################################################################
#                                                                      #
# apisix_gateway                                                       #
#                                                                      #
########################################################################

apisix_gateway_enabled: false

apisix_gateway_identifier: "{{ mash_playbook_service_identifier_prefix }}apisix-gateway"

apisix_gateway_uid: "{{ mash_playbook_uid }}"
apisix_gateway_gid: "{{ mash_playbook_gid }}"

apisix_gateway_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}apisix-gateway"

apisix_gateway_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if (mash_playbook_reverse_proxyable_services_additional_network and apisix_gateway_container_labels_traefik_enabled) else [])
  }}

apisix_gateway_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
apisix_gateway_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

apisix_gateway_container_labels_metrics_enabled: "{{ prometheus_enabled | default(false) or mash_playbook_metrics_exposure_enabled }}"
apisix_gateway_container_labels_metrics_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
apisix_gateway_container_labels_metrics_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ apisix_gateway_identifier }}"
apisix_gateway_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
apisix_gateway_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

# role-specific:etcd
apisix_gateway_config_deployment_etcd_host: |
  {{
    ([('http://' + etcd_identifier + ':2379')] if etcd_enabled else [])
  }}

apisix_gateway_config_deployment_etcd_user: "{{ ('root' if (etcd_enabled and not etcd_environment_variable_allow_none_authentication) else '') }}"
apisix_gateway_config_deployment_etcd_password: "{{ (etcd_environment_variable_etcd_root_password if (etcd_enabled and not etcd_environment_variable_allow_none_authentication) else '') }}"

apisix_gateway_container_additional_networks_custom: |
  {{
    ([etcd_container_network] if etcd_enabled else [])
  }}

apisix_gateway_systemd_required_systemd_services_list_auto: |
  {{
    ([(etcd_identifier + '.service')] if etcd_enabled else [])
  }}
# /role-specific:etcd

# role-specific:traefik
apisix_gateway_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
apisix_gateway_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /apisix_gateway                                                      #
#                                                                      #
########################################################################
# /role-specific:apisix_gateway



# role-specific:appsmith
########################################################################
#                                                                      #
# appsmith                                                             #
#                                                                      #
########################################################################

appsmith_enabled: false

appsmith_identifier: "{{ mash_playbook_service_identifier_prefix }}appsmith"

appsmith_uid: "{{ mash_playbook_uid }}"
appsmith_gid: "{{ mash_playbook_gid }}"

appsmith_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}appsmith"

appsmith_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

appsmith_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
appsmith_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
appsmith_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
appsmith_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /appsmith                                                            #
#                                                                      #
########################################################################
# /role-specific:appsmith



# role-specific:authelia
########################################################################
#                                                                      #
# authelia                                                             #
#                                                                      #
########################################################################

authelia_enabled: false

authelia_identifier: "{{ mash_playbook_service_identifier_prefix }}authelia"

authelia_uid: "{{ mash_playbook_uid }}"
authelia_gid: "{{ mash_playbook_gid }}"

authelia_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}authelia"

authelia_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and authelia_config_storage_postgres_host == postgres_identifier else [])
  }}

authelia_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and authelia_config_storage_postgres_host == postgres_identifier and authelia_container_network != postgres_container_network else [])
  }}

authelia_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
authelia_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

authelia_config_jwt_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'jwt.authelia', rounds=655555) | to_uuid }}"

authelia_config_session_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'ses.authelia', rounds=655555) | to_uuid }}"

authelia_config_identity_providers_oidc_hmac_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'hm.authelia', rounds=655555) | to_uuid }}"

# role-specific:mariadb
# If Postgres and MariaDB are not enabled, we favor Postgres.
# We only enable MySQL if it's the only enabled component (that is, if Postgres is not enabled at the same time).
authelia_config_storage_mysql_host: "{{ mariadb_identifier if mariadb_enabled and not postgres_enabled | default(false) else '' }}"
authelia_config_storage_mysql_port: "{{ '3306' if mariadb_enabled else '' }}"
authelia_config_storage_mysql_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.authelia', rounds=655555) | to_uuid }}"
# /role-specific:mariadb

# role-specific:postgres
authelia_config_storage_postgres_host: "{{ postgres_identifier if postgres_enabled else '' }}"
authelia_config_storage_postgres_port: "{{ '5432' if postgres_enabled else '' }}"
authelia_config_storage_postgres_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.authelia', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
authelia_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
authelia_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /authelia                                                            #
#                                                                      #
########################################################################
# /role-specific:authelia



# role-specific:authentik
########################################################################
#                                                                      #
# authentik                                                            #
#                                                                      #
########################################################################

authentik_enabled: false

authentik_identifier: "{{ mash_playbook_service_identifier_prefix }}authentik"

authentik_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}authentik"

authentik_uid: "{{ mash_playbook_uid }}"
authentik_gid: "{{ mash_playbook_gid }}"

authentik_server_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and authentik_database_hostname == postgres_identifier else [])
  }}

authentik_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and authentik_database_hostname == postgres_identifier and authentik_container_network != postgres_container_network else [])
  }}

authentik_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
authentik_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
authentik_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
authentik_database_port: "{{ '5432' if postgres_enabled else '' }}"
authentik_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.authentik', rounds=655555) | to_uuid }}"
authentik_database_username: "{{ authentik_identifier }}"
# /role-specific:postgres

# role-specific:traefik
authentik_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
authentik_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /authentik                                                           #
#                                                                      #
########################################################################
# /role-specific:authentik



# role-specific:backup_borg
########################################################################
#                                                                      #
# backup-borg                                                          #
#                                                                      #
########################################################################

backup_borg_enabled: false

backup_borg_identifier: "{{ mash_playbook_service_identifier_prefix }}backup-borg"

backup_borg_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}borg-backup"

backup_borg_uid: "{{ mash_playbook_uid }}"
backup_borg_gid: "{{ mash_playbook_gid }}"

backup_borg_container_network: "{{ postgres_container_network if postgres_enabled else backup_borg_identifier }}"

backup_borg_retention_prefix: "{{ mash_playbook_service_identifier_prefix }}"
backup_borg_storage_archive_name_format: "{{ mash_playbook_service_identifier_prefix }}-{now:%Y-%m-%d-%H%M%S}"

backup_borg_container_image_self_build: "{{ mash_playbook_architecture not in ['amd64', 'arm32', 'arm64'] }}"

backup_borg_location_source_directories:
  - "{{ mash_playbook_base_path }}"

backup_borg_location_exclude_patterns: |
  {{
    ([postgres_data_path] if postgres_enabled | default(false) else [])
    +
    ([mariadb_data_path] if mariadb_enabled | default(false) else [])
  }}

backup_borg_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled | default(false) else [])
    +
    ([mariadb_identifier ~ '.service'] if mariadb_enabled | default(false) else [])
  }}

backup_borg_mysql_enabled: "{{ mariadb_enabled }}"
backup_borg_postgresql_enabled: "{{ postgres_enabled }}"

# role-specific:mariadb
backup_borg_mysql_databases_hostname: "{{ mariadb_identifier if mariadb_enabled else '' }}"
backup_borg_mysql_databases_username: "root"
backup_borg_mysql_databases_password: "{{ mariadb_root_password if mariadb_enabled else '' }}"
backup_borg_mysql_databases_port: 3306
backup_borg_mysql_databases: "{{ mariadb_managed_databases | map(attribute='name') if mariadb_enabled else [] }}"
# /role-specific:mariadb

# role-specific:postgres
backup_borg_postgresql_databases_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
backup_borg_postgresql_databases_username: "{{ postgres_connection_username if postgres_enabled else '' }}"
backup_borg_postgresql_databases_password: "{{ postgres_connection_password if postgres_enabled else '' }}"
backup_borg_postgresql_databases_port: "{{ postgres_connection_port if postgres_enabled else 5432 }}"
backup_borg_postgresql_databases_auto: "{{ postgres_managed_databases | map(attribute='name') if postgres_enabled else [] }}"
# /role-specific:postgres

########################################################################
#                                                                      #
# /backup-borg                                                         #
#                                                                      #
########################################################################
# /role-specific:backup_borg



# role-specific:calibre-web
########################################################################
#                                                                      #
# calibre-web                                                          #
#                                                                      #
########################################################################

calibre_web_enabled: false

calibre_web_identifier: "{{ mash_playbook_service_identifier_prefix }}calibre-web"

calibre_web_uid: "{{ mash_playbook_uid }}"
calibre_web_gid: "{{ mash_playbook_gid }}"

calibre_web_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}calibre-web"

calibre_web_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

calibre_web_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
calibre_web_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
calibre_web_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
calibre_web_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /calibre-web                                                         #
#                                                                      #
########################################################################
# /role-specific:calibre-web



# role-specific:changedetection
########################################################################
#                                                                      #
# Changedetection.io                                                   #
#                                                                      #
########################################################################

changedetection_enabled: false

changedetection_identifier: "{{ mash_playbook_service_identifier_prefix }}changedetection"

changedetection_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}changedetection"

changedetection_uid: "{{ mash_playbook_uid }}"
changedetection_gid: "{{ mash_playbook_gid }}"

changedetection_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

changedetection_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
changedetection_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
changedetection_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
changedetection_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /Changedetection.io                                                  #
#                                                                      #
########################################################################
# /role-specific:changedetection



# role-specific:clickhouse
########################################################################
#                                                                      #
# clickhouse                                                           #
#                                                                      #
########################################################################

clickhouse_enabled: false

clickhouse_identifier: "{{ mash_playbook_service_identifier_prefix }}clickhouse"

clickhouse_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}clickhouse"

clickhouse_uid: "{{ mash_playbook_uid }}"
clickhouse_gid: "{{ mash_playbook_gid }}"

clickhouse_managed_databases_auto_itemized:
  # Dummy entry, which is not role-specific.
  # Ensures there's at least one entry defined in the list.
  - "{{ omit }}"

  # role-specific:plausible
  - |-
    {{
      ({
        'name': plausible_clickhouse_database_name,
        'username': plausible_clickhouse_database_username,
        'password': plausible_clickhouse_database_password,
        'additional_sql': ('GRANT SELECT ON system.replicas TO ' + plausible_clickhouse_database_username + '; GRANT SELECT ON system.parts TO ' + plausible_clickhouse_database_username + ';')
      } if plausible_enabled and plausible_clickhouse_database_hostname == clickhouse_identifier else omit)
    }}
  # /role-specific:plausible

clickhouse_managed_databases_auto: "{{ clickhouse_managed_databases_auto_itemized | reject('equalto', omit) }}"

########################################################################
#                                                                      #
# /clickhouse                                                          #
#                                                                      #
########################################################################
# /role-specific:clickhouse



# role-specific:collabora_online
########################################################################
#                                                                      #
# collabora-online                                                     #
#                                                                      #
########################################################################

collabora_online_enabled: false

collabora_online_identifier: "{{ mash_playbook_service_identifier_prefix }}collabora-online"

collabora_online_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}collabora-online"

collabora_online_uid: "{{ mash_playbook_uid }}"
collabora_online_gid: "{{ mash_playbook_gid }}"

collabora_online_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

collabora_online_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
collabora_online_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
collabora_online_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
collabora_online_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /collabora-online                                                    #
#                                                                      #
########################################################################
# /role-specific:collabora_online



# role-specific:couchdb
########################################################################
#                                                                      #
# couchdb                                                              #
#                                                                      #
########################################################################
couchdb_enabled: false

couchdb_identifier: "{{ mash_playbook_service_identifier_prefix }}couchdb"

couchdb_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}couchdb"

couchdb_uid: "5984"
couchdb_gid: "5984"

couchdb_admin_user: "{{ mash_playbook_service_identifier_prefix }}admin"
couchdb_admin_passwd: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.couchdb', rounds=655555) | to_uuid }}"
couchdb_config_uuid: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'uuid.couchdb', rounds=655555) | to_uuid }}"

couchdb_config_couch_chttpd_auth_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.couchdb', rounds=655555) | to_uuid }}"

########################################################################
#                                                                      #
# /couchdb                                                             #
#                                                                      #
########################################################################
# /role-specific:couchdb



# role-specific:docker_registry
########################################################################
#                                                                      #
# docker-registry                                                      #
#                                                                      #
########################################################################

docker_registry_enabled: false

docker_registry_identifier: "{{ mash_playbook_service_identifier_prefix }}docker-registry"

docker_registry_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}docker-registry"

docker_registry_uid: "{{ mash_playbook_uid }}"
docker_registry_gid: "{{ mash_playbook_gid }}"

docker_registry_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

docker_registry_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
docker_registry_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
docker_registry_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
docker_registry_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /docker-registry                                                     #
#                                                                      #
########################################################################
# /role-specific:docker_registry



# role-specific:docker_registry_browser
########################################################################
#                                                                      #
# docker-registry-browser                                              #
#                                                                      #
########################################################################

docker_registry_browser_enabled: false

docker_registry_browser_identifier: "{{ mash_playbook_service_identifier_prefix }}docker-registry-browser"

docker_registry_browser_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}docker-registry-browser"

docker_registry_browser_uid: "{{ mash_playbook_uid }}"
docker_registry_browser_gid: "{{ mash_playbook_gid }}"

docker_registry_browser_secret_key_base: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'browser', rounds=655555) }}"

docker_registry_browser_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

docker_registry_browser_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
docker_registry_browser_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
docker_registry_browser_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
docker_registry_browser_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /docker-registry-browser                                             #
#                                                                      #
########################################################################
# /role-specific:docker_registry_browser



# role-specific:docker_registry_proxy
########################################################################
#                                                                      #
# docker-registry-proxy                                                #
#                                                                      #
########################################################################

docker_registry_proxy_enabled: false

docker_registry_proxy_identifier: "{{ mash_playbook_service_identifier_prefix }}docker-registry-proxy"

docker_registry_proxy_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}docker-registry-proxy"

docker_registry_proxy_uid: "{{ mash_playbook_uid }}"
docker_registry_proxy_gid: "{{ mash_playbook_gid }}"

docker_registry_proxy_target_scheme: "{{ 'http' if docker_registry_enabled else '' }}"
docker_registry_proxy_target_host: "{{ docker_registry_identifier+':5000' if docker_registry_enabled else '' }}"

docker_registry_proxy_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

docker_registry_proxy_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
docker_registry_proxy_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
docker_registry_proxy_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
docker_registry_proxy_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /docker-registry-proxy                                               #
#                                                                      #
########################################################################
# /role-specific:docker_registry_proxy



# role-specific:docker_registry_purger
########################################################################
#                                                                      #
# docker-registry-purger                                               #
#                                                                      #
########################################################################

docker_registry_purger_enabled: false

docker_registry_purger_identifier: "{{ mash_playbook_service_identifier_prefix }}docker-registry-purger"

docker_registry_purger_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}docker-registry-purger"

docker_registry_purger_uid: "{{ mash_playbook_uid }}"
docker_registry_purger_gid: "{{ mash_playbook_gid }}"

########################################################################
#                                                                      #
# /docker-registry-purger                                              #
#                                                                      #
########################################################################
# /role-specific:docker_registry_purger



# role-specific:dokuwiki
########################################################################
#                                                                      #
# dokuwiki                                                             #
#                                                                      #
########################################################################

dokuwiki_enabled: false

dokuwiki_identifier: "{{ mash_playbook_service_identifier_prefix }}dokuwiki"

dokuwiki_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}dokuwiki"

dokuwiki_uid: "{{ mash_playbook_uid }}"
dokuwiki_gid: "{{ mash_playbook_gid }}"

dokuwiki_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
  }}

dokuwiki_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

dokuwiki_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
dokuwiki_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
dokuwiki_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
dokuwiki_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /dokuwiki                                                            #
#                                                                      #
########################################################################
# /role-specific:dokuwiki



# role-specific:echoip
########################################################################
#                                                                      #
# echoip                                                               #
#                                                                      #
########################################################################

echoip_enabled: false

echoip_identifier: "{{ mash_playbook_service_identifier_prefix }}echoip"

echoip_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}echoip"

echoip_uid: "{{ mash_playbook_uid }}"
echoip_gid: "{{ mash_playbook_gid }}"

echoip_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
  }}

echoip_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

echoip_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
echoip_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
echoip_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
echoip_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /echoip                                                              #
#                                                                      #
########################################################################
# /role-specific:echoip


# role-specific:endlessh
########################################################################
#                                                                      #
# endlessh                                                             #
#                                                                      #
########################################################################

endlessh_enabled: false
endlessh_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
endlessh_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ endlessh_identifier }}"
endlessh_identifier: "{{ mash_playbook_service_identifier_prefix }}endlessh"
endlessh_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}endlessh"
endlessh_uid: "{{ mash_playbook_uid }}"
endlessh_gid: "{{ mash_playbook_gid }}"

endlessh_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

endlessh_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
endlessh_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
endlessh_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and endlessh_hostname }}"
endlessh_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
endlessh_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
endlessh_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /endlessh                                                            #
#                                                                      #
########################################################################
# /role-specific:endlessh

# role-specific:etcd
########################################################################
#                                                                      #
# etcd                                                                 #
#                                                                      #
########################################################################

etcd_enabled: false

etcd_identifier: "{{ mash_playbook_service_identifier_prefix }}etcd"

etcd_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}etcd"

etcd_uid: "{{ mash_playbook_uid }}"
etcd_gid: "{{ mash_playbook_gid }}"

etcd_environment_variable_etcd_root_password: "{{ '' if etcd_environment_variable_allow_none_authentication else ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'etcd', rounds=655555) | to_uuid) }}"

########################################################################
#                                                                      #
# /etcd                                                                #
#                                                                      #
########################################################################
# /role-specific:etcd

# role-specific:etherpad
########################################################################
#                                                                      #
# etherpad                                                             #
#                                                                      #
########################################################################

etherpad_enabled: false

etherpad_identifier: "{{ mash_playbook_service_identifier_prefix }}etherpad"

etherpad_uid: "{{ mash_playbook_uid }}"
etherpad_gid: "{{ mash_playbook_gid }}"

etherpad_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}etherpad"

etherpad_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled | default(false) and etherpad_database_hostname == postgres_identifier else [])
  }}

etherpad_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled | default(false) and etherpad_database_hostname == postgres_identifier and etherpad_container_network != postgres_container_network else [])
  }}

etherpad_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
etherpad_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
etherpad_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
etherpad_database_port: "{{ '5432' if postgres_enabled else '' }}"
etherpad_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.etherpad', rounds=655555) | to_uuid }}"
etherpad_database_username: "{{ etherpad_identifier }}"
# /role-specific:postgres

# role-specific:traefik
etherpad_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
etherpad_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /etherpad                                                            #
#                                                                      #
########################################################################
# /role-specific:etherpad

# role-specific:exim_relay
########################################################################
#                                                                      #
# exim_relay                                                           #
#                                                                      #
########################################################################

exim_relay_enabled: false

exim_relay_identifier: "{{ mash_playbook_service_identifier_prefix }}exim-relay"

exim_relay_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}exim-relay"

exim_relay_uid: "{{ mash_playbook_uid }}"
exim_relay_gid: "{{ mash_playbook_gid }}"

########################################################################
#                                                                      #
# /exim_relay                                                          #
#                                                                      #
########################################################################
# /role-specific:exim_relay


# role-specific:firezone
########################################################################
#                                                                      #
# firezone                                                             #
#                                                                      #
########################################################################

firezone_enabled: false

firezone_identifier: "{{ mash_playbook_service_identifier_prefix }}firezone"

firezone_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}firezone"

firezone_uid: "{{ mash_playbook_uid }}"
firezone_gid: "{{ mash_playbook_gid }}"
firezone_generic_secret: "{{ mash_playbook_generic_secret_key }}"

firezone_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled | default(false) and firezone_database_host == postgres_identifier else [])
  }}

firezone_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled | default(false) and firezone_database_host == postgres_identifier and firezone_container_network != postgres_container_network else [])
  }}

firezone_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
firezone_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
firezone_database_host: "{{ postgres_identifier if postgres_enabled else '' }}"
firezone_database_port: "{{ '5432' if postgres_enabled else '' }}"
firezone_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'fz.db.user', rounds=655555) | to_uuid }}"
firezone_database_username: "{{ firezone_identifier }}"
# /role-specific:postgres

# role-specific:traefik
firezone_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
firezone_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /firezone                                                            #
#                                                                      #
########################################################################
# /role-specific:firezone



# role-specific:focalboard
########################################################################
#                                                                      #
# focalboard                                                           #
#                                                                      #
########################################################################

focalboard_enabled: false

focalboard_identifier: "{{ mash_playbook_service_identifier_prefix }}focalboard"

focalboard_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}focalboard"

focalboard_uid: "{{ mash_playbook_uid }}"
focalboard_gid: "{{ mash_playbook_gid }}"

focalboard_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and focalboard_database_hostname == postgres_identifier else [])
  }}

focalboard_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled | default(false) and focalboard_database_hostname == postgres_identifier else [])
  }}

focalboard_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
focalboard_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

focalboard_database_type: "{{ 'postgres' if postgres_enabled else '' }}"

# role-specific:postgres
focalboard_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
focalboard_database_port: "{{ '5432' if postgres_enabled else '' }}"
focalboard_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.focalboard', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
focalboard_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
focalboard_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /focalboard                                                          #
#                                                                      #
########################################################################
# /role-specific:focalboard



# role-specific:forgejo
########################################################################
#                                                                      #
# forgejo                                                              #
#                                                                      #
########################################################################

forgejo_enabled: false

forgejo_identifier: "{{ mash_playbook_service_identifier_prefix }}forgejo"

forgejo_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}forgejo"

forgejo_uid: "{{ mash_playbook_uid }}"
forgejo_gid: "{{ mash_playbook_gid }}"

forgejo_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and forgejo_config_database_hostname == postgres_identifier else [])
  }}

forgejo_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and forgejo_config_database_hostname == postgres_identifier and forgejo_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and forgejo_config_mailer_smtp_addr == exim_relay_identifier | default('mash-exim-relay') and forgejo_container_network != exim_relay_container_network) else [])
  }}

forgejo_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
forgejo_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
forgejo_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
forgejo_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

# role-specific:exim_relay
forgejo_config_mailer_enabled: "{{ exim_relay_enabled }}"
forgejo_config_mailer_smtp_addr: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
forgejo_config_mailer_smtp_port: 8025
forgejo_config_mailer_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
forgejo_config_mailer_protocol: "{{ 'smtp' if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
forgejo_config_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
forgejo_config_database_port: "{{ '5432' if postgres_enabled else '' }}"
forgejo_config_database_username: "forgejo"
forgejo_config_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.forgejo', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
forgejo_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
forgejo_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /forgejo                                                             #
#                                                                      #
########################################################################
# /role-specific:forgejo



# role-specific:forgejo_runner
########################################################################
#                                                                      #
# forgejo_runner                                                       #
#                                                                      #
########################################################################

forgejo_runner_enabled: false

forgejo_runner_uid: "0"
forgejo_runner_gid: "0"

forgejo_runner_identifier: "{{ mash_playbook_service_identifier_prefix }}forgejo-runner"

forgejo_runner_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}forgejo-runner"

forgejo_runner_systemd_required_systemd_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
  }}

########################################################################
#                                                                      #
# /forgejo_runner                                                      #
#                                                                      #
########################################################################
# /role-specific:forgejo_runner



# role-specific:freescout
########################################################################
#                                                                      #
# freescout                                                            #
#                                                                      #
########################################################################

freescout_enabled: false

freescout_identifier: "{{ mash_playbook_service_identifier_prefix }}freescout"

freescout_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}freescout"

freescout_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and freescout_database_hostname == postgres_identifier else [])
  }}

freescout_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and freescout_database_hostname == postgres_identifier and freescout_container_network != postgres_container_network else [])
  }}

freescout_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
freescout_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
freescout_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
freescout_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'freescout.db', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
freescout_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
freescout_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /freescout                                                           #
#                                                                      #
########################################################################
# /role-specific:freescout



# role-specific:freshrss
########################################################################
#                                                                      #
# freshrss                                                             #
#                                                                      #
########################################################################

freshrss_enabled: false

freshrss_identifier: "{{ mash_playbook_service_identifier_prefix }}freshrss"

freshrss_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}freshrss"

# freshrss_uid and freshrss_gid are intentionally not being set here.
# FreshRSS can only work with a specific user and group, as hardcoded in the role defaults.
freshrss_uid: "0"
freshrss_gid: "33"

freshrss_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and freshrss_database_hostname == postgres_identifier else [])
  }}

freshrss_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and freshrss_database_hostname == postgres_identifier and freshrss_container_network != postgres_container_network else [])
  }}

freshrss_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
freshrss_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
freshrss_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
#
# Intentionally not auto-generating freshrss_database_password.
# It's meant to be explicitly defined, so that it can be used in the setup wizard after installation.
#
# /role-specific:postgres

# role-specific:traefik
freshrss_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
freshrss_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /freshrss                                                            #
#                                                                      #
########################################################################
# /role-specific:freshrss


# role-specific:funkwhale
########################################################################
#                                                                      #
# funkwhale                                                            #
#                                                                      #
########################################################################

funkwhale_enabled: false

funkwhale_identifier: "{{ mash_playbook_service_identifier_prefix }}funkwhale"

funkwhale_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}funkwhale"

funkwhale_uid: "{{ mash_playbook_uid }}"
funkwhale_gid: "{{ mash_playbook_gid }}"

funkwhale_api_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and funkwhale_database_hostname == postgres_identifier else [])
  }}

funkwhale_frontend_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and funkwhale_database_hostname == postgres_identifier else [])
  }}

funkwhale_api_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and funkwhale_database_hostname == postgres_identifier and funkwhale_api_container_network != postgres_container_network else [])
  }}

funkwhale_frontend_container_additional_networks_auto: |
  {{
    ([postgres_container_network] if postgres_enabled and funkwhale_database_hostname == postgres_identifier and funkwhale_frontend_container_network != postgres_container_network else [])
    +
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

funkwhale_api_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
funkwhale_api_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
funkwhale_frontend_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
funkwhale_frontend_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
funkwhale_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
funkwhale_database_port: "{{ '5432' if postgres_enabled else '' }}"
funkwhale_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.funkwhale', rounds=655555) | to_uuid }}"
funkwhale_database_username: "{{ funkwhale_identifier }}"
# /role-specific:postgres

# role-specific:traefik
funkwhale_api_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
funkwhale_api_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
funkwhale_frontend_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
funkwhale_frontend_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /funkwhale                                                           #
#                                                                      #
########################################################################
# /role-specific:funkwhale


# role-specific:gitea
########################################################################
#                                                                      #
# gitea                                                                #
#                                                                      #
########################################################################

gitea_enabled: false

gitea_identifier: "{{ mash_playbook_service_identifier_prefix }}gitea"

gitea_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}gitea"

gitea_uid: "{{ mash_playbook_uid }}"
gitea_gid: "{{ mash_playbook_gid }}"

gitea_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and gitea_config_database_hostname == postgres_identifier else [])
  }}

gitea_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and gitea_config_database_hostname == postgres_identifier and gitea_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and gitea_config_mailer_smtp_addr == exim_relay_identifier | default('mash-exim-relay') and gitea_container_network != exim_relay_container_network) else [])
  }}

gitea_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
gitea_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
gitea_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
gitea_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

# role-specific:exim_relay
gitea_config_mailer_enabled: "{{ exim_relay_enabled }}"
gitea_config_mailer_smtp_addr: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
gitea_config_mailer_smtp_port: 8025
gitea_config_mailer_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
gitea_config_mailer_protocol: "{{ 'smtp' if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
gitea_config_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
gitea_config_database_port: "{{ '5432' if postgres_enabled else '' }}"
gitea_config_database_username: "gitea"
gitea_config_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.gitea', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
gitea_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
gitea_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /gitea                                                               #
#                                                                      #
########################################################################
# /role-specific:gitea



# role-specific:gotosocial
########################################################################
#                                                                      #
# gotosocial                                                           #
#                                                                      #
########################################################################

gotosocial_enabled: false

gotosocial_identifier: "{{ mash_playbook_service_identifier_prefix }}gotosocial"

gotosocial_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}gotosocial"

gotosocial_uid: "{{ mash_playbook_uid }}"
gotosocial_gid: "{{ mash_playbook_gid }}"

gotosocial_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and gotosocial_database_host == postgres_identifier else [])
  }}

gotosocial_systemd_wanted_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and gotosocial_smtp_host == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

gotosocial_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and gotosocial_database_host == postgres_identifier and gotosocial_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and gotosocial_smtp_host == exim_relay_identifier | default('mash-exim-relay') and gotosocial_container_network != exim_relay_container_network) else [])
  }}

gotosocial_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
gotosocial_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
gotosocial_smtp_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
gotosocial_smtp_port: 8025
gotosocial_smtp_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
gotosocial_database_host: "{{ postgres_identifier if postgres_enabled else '' }}"
gotosocial_database_port: "{{ '5432' if postgres_enabled else '' }}"
gotosocial_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.gotosocial', rounds=655555) | to_uuid }}"
gotosocial_database_username: "{{ gotosocial_identifier }}"
# /role-specific:postgres

# role-specific:traefik
gotosocial_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
gotosocial_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /gotosocial                                                          #
#                                                                      #
########################################################################
# /role-specific:gotosocial



# role-specific:grafana
########################################################################
#                                                                      #
# grafana                                                              #
#                                                                      #
########################################################################

grafana_enabled: false

grafana_identifier: "{{ mash_playbook_service_identifier_prefix }}grafana"

grafana_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}grafana"

grafana_uid: "{{ mash_playbook_uid }}"
grafana_gid: "{{ mash_playbook_gid }}"

grafana_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if (grafana_container_labels_traefik_enabled and mash_playbook_reverse_proxyable_services_additional_network) else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and grafana_smtp_host == exim_relay_identifier | default('mash-exim-relay') and grafana_container_network != exim_relay_container_network) else [])
  }}

grafana_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
grafana_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
grafana_smtp_enabled: "{{ exim_relay_enabled | default(false) }}"
grafana_smtp_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
grafana_smtp_port: 8025
grafana_smtp_from_address: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:traefik
grafana_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
grafana_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /grafana                                                             #
#                                                                      #
########################################################################
# /role-specific:grafana



# role-specific:headscale
########################################################################
#                                                                      #
# headscale                                                            #
#                                                                      #
########################################################################

headscale_enabled: false

headscale_identifier: "{{ mash_playbook_service_identifier_prefix }}headscale"

headscale_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}headscale"

headscale_uid: "{{ mash_playbook_uid }}"
headscale_gid: "{{ mash_playbook_gid }}"

headscale_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

headscale_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
headscale_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
headscale_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
headscale_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /headscale                                                           #
#                                                                      #
########################################################################
# /role-specific:headscale



# role-specific:healthchecks
########################################################################
#                                                                      #
# healthchecks                                                         #
#                                                                      #
########################################################################

healthchecks_enabled: false

healthchecks_identifier: "{{ mash_playbook_service_identifier_prefix }}healthchecks"

healthchecks_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}healthchecks"

healthchecks_uid: "{{ mash_playbook_uid }}"
healthchecks_gid: "{{ mash_playbook_gid }}"

healthchecks_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and healthchecks_database_hostname == postgres_identifier else [])
  }}

healthchecks_systemd_wanted_systemd_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and healthchecks_environment_variable_email_host == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

healthchecks_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and healthchecks_database_hostname == postgres_identifier and healthchecks_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and healthchecks_environment_variable_email_host == exim_relay_identifier | default('mash-exim-relay') and healthchecks_container_network != exim_relay_container_network) else [])
  }}

healthchecks_environment_variable_secret_key: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'healthchecks', rounds=655555) | to_uuid }}"

healthchecks_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
healthchecks_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
healthchecks_environment_variable_default_from_email: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
healthchecks_environment_variable_email_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
healthchecks_environment_variable_email_port: "{{ 8025 if exim_relay_enabled else '587' }}"
healthchecks_environment_variable_email_use_tls: "{{ false if exim_relay_enabled else true }}"
healthchecks_environment_variable_email_use_verification: "{{ false if exim_relay_enabled else true }}"
# /role-specific:exim_relay

# role-specific:postgres
healthchecks_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
healthchecks_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'healthchecks.db', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
healthchecks_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
healthchecks_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /healthchecks                                                        #
#                                                                      #
########################################################################
# /role-specific:healthchecks



# role-specific:hubsite
########################################################################
#                                                                      #
# hubsite                                                              #
#                                                                      #
########################################################################

hubsite_enabled: false

hubsite_identifier: "{{ mash_playbook_service_identifier_prefix }}hubsite"

hubsite_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}hubsite"

hubsite_uid: "{{ mash_playbook_uid }}"
hubsite_gid: "{{ mash_playbook_gid }}"

hubsite_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

hubsite_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
hubsite_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
hubsite_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
hubsite_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

# Services
##########

# role-specific:adguard_home
# Adguard home
hubsite_service_adguard_home_enabled: "{{ adguard_home_enabled }}"
hubsite_service_adguard_home_name: Adguard Home
hubsite_service_adguard_home_url: "https://{{ adguard_home_hostname }}{{ adguard_home_path_prefix }}"
hubsite_service_adguard_home_logo_location: "{{ role_path }}/assets/shield.png"
hubsite_service_adguard_home_description: "A network-wide DNS software for blocking ads & tracking"
hubsite_service_adguard_home_priority: 1000
# /role-specific:adguard_home

# role-specific:authentik
# authentik
hubsite_service_authentik_enabled: "{{ authentik_enabled }}"
hubsite_service_authentik_name: Authentik
hubsite_service_authentik_url: "https://{{ authentik_hostname }}"
hubsite_service_authentik_logo_location: "{{ role_path }}/assets/authentik.png"
hubsite_service_authentik_description: "An open source identity provider"
hubsite_service_authentik_priority: 1000
# /role-specific:authentik

# role-specific:appsmith
# Appsmith
hubsite_service_appsmith_enabled: "{{ appsmith_enabled }}"
hubsite_service_appsmith_name: Appsmith
hubsite_service_appsmith_url: "https://{{ appsmith_hostname }}{{ appsmith_path_prefix }}"
hubsite_service_appsmith_logo_location: "{{ role_path }}/assets/appsmith.png"
hubsite_service_appsmith_description: "Platform for building and deploying custom internal tools and applications without writing code"
hubsite_service_appsmith_priority: 1000
# /role-specific:appsmith

# role-specific:docker_registry_browser
# Docker Registry Browser
hubsite_service_docker_registry_browser_enabled: "{{ docker_registry_browser_enabled }}"
hubsite_service_docker_registry_browser_name: Docker Registry Browser
hubsite_service_docker_registry_browser_url: "https://{{ docker_registry_browser_hostname }}{{ docker_registry_browser_path_prefix }}"
hubsite_service_docker_registry_browser_logo_location: "{{ role_path }}/assets/docker.png"
hubsite_service_docker_registry_browser_description: "Browse docker images"
hubsite_service_docker_registry_browser_priority: 1000
# /role-specific:docker_registry_browser

# role-specific:etherpad
# etherpad
hubsite_service_etherpad_enabled: "{{ etherpad_enabled }}"
hubsite_service_etherpad_name: Etherpad
hubsite_service_etherpad_url: "https://{{ etherpad_hostname }}{{ etherpad_path_prefix }}"
hubsite_service_etherpad_logo_location: "{{ role_path }}/assets/etherpad.png"
hubsite_service_etherpad_description: "Open source collaborative text editor"
hubsite_service_etherpad_priority: 1000
# /role-specific:etherpad

# role-specific:firezone
# Firezone
hubsite_service_firezone_enabled: "{{ firezone_enabled }}"
hubsite_service_firezone_name: Firezone
hubsite_service_firezone_url: "https://{{ firezone_hostname }}"
hubsite_service_firezone_logo_location: "{{ role_path }}/assets/firezone.png"
hubsite_service_firezone_description: "A self-hosted VPN server, based on Wireguard"
hubsite_service_firezone_priority: 1000
# /role-specific:firezone

# role-specific:focalboard
# Focalboard
hubsite_service_focalboard_enabled: "{{ focalboard_enabled }}"
hubsite_service_focalboard_name: Focalboard
hubsite_service_focalboard_url: "https://{{ focalboard_hostname }}{{ focalboard_path_prefix }}"
hubsite_service_focalboard_logo_location: "{{ role_path }}/assets/focalboard.png"
hubsite_service_focalboard_description: "An open source, self-hosted alternative to Trello, Notion, and Asana."
hubsite_service_focalboard_priority: 1000
# /role-specific:focalboard

# role-specific:freshrss
# FreshRSS
hubsite_service_freshrss_enabled: "{{ freshrss_enabled }}"
hubsite_service_freshrss_name: FreshRSS
hubsite_service_freshrss_url: "https://{{ freshrss_hostname }}{{ freshrss_path_prefix }}"
hubsite_service_freshrss_logo_location: "{{ role_path }}/assets/freshrss.png"
hubsite_service_freshrss_description: "RSS and Atom feed aggregator."
hubsite_service_freshrss_priority: 1000
# /role-specific:freshrss

# role-specific:funkwhale
# Funkwhale
hubsite_service_funkwhale_enabled: "{{ funkwhale_enabled }}"
hubsite_service_funkwhale_name: Funkwhale
hubsite_service_funkwhale_url: "https://{{ funkwhale_hostname }}"
hubsite_service_funkwhale_logo_location: "{{ role_path }}/assets/funkwhale.png"
hubsite_service_funkwhale_description: "Listen and share music with a selfhosted streaming server"
hubsite_service_funkwhale_priority: 1000
# /role-specific:funkwhale

# role-specific:gitea
# Gitea
hubsite_service_gitea_enabled: "{{ gitea_enabled }}"
hubsite_service_gitea_name: Gitea
hubsite_service_gitea_url: "https://{{ gitea_hostname }}{{ gitea_path_prefix }}"
hubsite_service_gitea_logo_location: "{{ role_path }}/assets/gitea.png"
hubsite_service_gitea_description: "A git service"
hubsite_service_gitea_priority: 1000
# /role-specific:gitea

# role-specific:gotosocial
# GoToSocial
hubsite_service_gotosocial_enabled: "{{ gotosocial_enabled }}"
hubsite_service_gotosocial_name: GoToSocial
hubsite_service_gotosocial_url: "https://{{ gotosocial_hostname }}"
hubsite_service_gotosocial_logo_location: "{{ role_path }}/assets/gotosocial.png"
hubsite_service_gotosocial_description: "A fediverse server"
hubsite_service_gotosocial_priority: 1000
# /role-specific:gotosocial

# role-specific:grafana
# Grafana
hubsite_service_grafana_enabled: "{{ grafana_enabled }}"
hubsite_service_grafana_name: Grafana
hubsite_service_grafana_url: "https://{{ grafana_hostname }}{{ grafana_path_prefix }}"
hubsite_service_grafana_logo_location: "{{ role_path }}/assets/grafana.png"
hubsite_service_grafana_description: "Check how your server is doing"
hubsite_service_grafana_priority: 1000
# /role-specific:grafana

# role-specific:healthchecks
# Healthchecks
hubsite_service_healthchecks_enabled: "{{ healthchecks_enabled }}"
hubsite_service_healthchecks_name: Healthchecks
hubsite_service_healthchecks_url: "https://{{ healthchecks_hostname }}{{ healthchecks_path_prefix }}"
hubsite_service_healthchecks_logo_location: "{{ role_path }}/assets/healthchecks.png"
hubsite_service_healthchecks_description: "A simple and Effective Cron Job Monitoring solution"
hubsite_service_healthchecks_priority: 1000
# /role-specific:healthchecks

# role-specific:ihatemoney
# ihatemoney
hubsite_service_ihatemoney_enabled: "{{ ihatemoney_enabled }}"
hubsite_service_ihatemoney_name: ihatemoney
hubsite_service_ihatemoney_url: "https://{{ ihatemoney_hostname }}{{ ihatemoney_path_prefix }}"
hubsite_service_ihatemoney_logo_location: "{{ role_path }}/assets/ihatemoney.png"
hubsite_service_ihatemoney_description: "Manage your shared expenses, easily"
hubsite_service_ihatemoney_priority: 1000
# /role-specific:ihatemoney

# role-specific:joplin_server
# Joplin Server
hubsite_service_joplin_server_enabled: "{{ joplin_server_enabled }}"
hubsite_service_joplin_server_name: Joplin Server
hubsite_service_joplin_server_url: "https://{{ joplin_server_hostname }}{{ joplin_server_path_prefix }}"
hubsite_service_joplin_server_logo_location: ""  # Note official logos are non-free. See: https://github.com/laurent22/joplin/blob/dev/Assets/LICENSE
hubsite_service_joplin_server_description: "Self-hosted server component for Joplin"
hubsite_service_joplin_server_priority: 1000
# /role-specific:joplin_server

# role-specific:keycloak
# Keycloak
hubsite_service_keycloak_enabled: "{{ keycloak_enabled }}"
hubsite_service_keycloak_name: Keycloak
hubsite_service_keycloak_url: "https://{{ keycloak_hostname }}{{ keycloak_path_prefix }}"
hubsite_service_keycloak_logo_location: "{{ role_path }}/assets/keycloak.png"
hubsite_service_keycloak_description: "An open source identity and access management solution."
hubsite_service_keycloak_priority: 1000
# /role-specific:keycloak

# role-specific:labelstudio
# Label Studio
hubsite_service_labelstudio_enabled: "{{ labelstudio_enabled }}"
hubsite_service_labelstudio_name: "Label Studio"
hubsite_service_labelstudio_url: "https://{{ labelstudio_hostname }}{{ labelstudio_path_prefix }}"
hubsite_service_labelstudio_logo_location: "{{ role_path }}/assets/labelstudio.png"
hubsite_service_labelstudio_description: "The most flexible data labeling platform to fine-tune LLMs, prepare training data or validate AI models"
hubsite_service_labelstudio_priority: 1000
# /role-specific:labelstudio

# role-specific:languagetool
# LanguageTool
hubsite_service_languagetool_enabled: "{{ languagetool_enabled }}"
hubsite_service_languagetool_name: LanguageTool
hubsite_service_languagetool_url: "https://{{ languagetool_hostname }}{{ languagetool_path_prefix }}"
hubsite_service_languagetool_logo_location: "{{ role_path }}/assets/languagetool.png"
hubsite_service_languagetool_description: "An open source online grammar, style and spell checker"
hubsite_service_languagetool_priority: 1000
# /role-specific:languagetool

# role-specific:miniflux
# Miniflux
hubsite_service_miniflux_enabled: "{{ miniflux_enabled }}"
hubsite_service_miniflux_name: Miniflux
hubsite_service_miniflux_url: "https://{{ miniflux_hostname }}{{ miniflux_path_prefix }}"
hubsite_service_miniflux_logo_location: "{{ role_path }}/assets/miniflux.png"
hubsite_service_miniflux_description: "An opinionated feed reader"
hubsite_service_miniflux_priority: 1000
# /role-specific:miniflux

# role-specific:navidrome
# Navidrome
hubsite_service_navidrome_enabled: "{{ navidrome_enabled }}"
hubsite_service_navidrome_name: Navidrome
hubsite_service_navidrome_url: "https://{{ navidrome_hostname }}{{ navidrome_path_prefix }}"
hubsite_service_navidrome_logo_location: "{{ role_path }}/assets/navidrome.png"
hubsite_service_navidrome_description: "A Subsonic-API compatible music server"
hubsite_service_navidrome_priority: 1000
# /role-specific:navidrome

# role-specific:n8n
# n8n
hubsite_service_n8n_enabled: "{{ n8n_enabled }}"
hubsite_service_n8n_name: n8n
hubsite_service_n8n_url: "https://{{ n8n_hostname }}{{ n8n_path_prefix }}"
hubsite_service_n8n_logo_location: "{{ role_path }}/assets/n8n.png"
hubsite_service_n8n_description: "Workflow automation for technical people."
hubsite_service_n8n_priority: 1000
# /role-specific:n8n

# role-specific:linkding
# Linkding
hubsite_service_linkding_enabled: "{{ linkding_enabled }}"
hubsite_service_linkding_name: Linkding
hubsite_service_linkding_url: "https://{{ linkding_hostname }}{{ linkding_path_prefix }}"
hubsite_service_linkding_logo_location: "{{ role_path }}/assets/linkding.png"
hubsite_service_linkding_description: "Bookmark manager that is designed be to be minimal and fast."
hubsite_service_linkding_priority: 1000
# /role-specific:linkding

# role-specific:nextcloud
# Nextcloud
hubsite_service_nextcloud_enabled: "{{ nextcloud_enabled }}"
hubsite_service_nextcloud_name: Nextcloud
hubsite_service_nextcloud_url: "https://{{ nextcloud_hostname }}{{ nextcloud_path_prefix }}"
hubsite_service_nextcloud_logo_location: "{{ role_path }}/assets/nextcloud.png"
hubsite_service_nextcloud_description: "Sync your files & much more"
hubsite_service_nextcloud_priority: 1000
# /role-specific:nextcloud

# role-specific:ntfy
# ntfy
hubsite_service_ntfy_enabled: "{{ ntfy_enabled }}"
hubsite_service_ntfy_name: ntfy
hubsite_service_ntfy_url: "https://{{ ntfy_hostname }}{{ ntfy_path_prefix }}"
hubsite_service_ntfy_logo_location: "{{ role_path }}/assets/ntfy.png"
hubsite_service_ntfy_description: "Send push notifications from any computer"
hubsite_service_ntfy_priority: 1000
# /role-specific:ntfy

# role-specific:owncast
# Owncast
hubsite_service_owncast_enabled: "{{ owncast_enabled }}"
hubsite_service_owncast_name: Owncast
hubsite_service_owncast_url: "https://{{ owncast_hostname }}"
hubsite_service_owncast_logo_location: "{{ role_path }}/assets/owncast.png"
hubsite_service_owncast_description: "Livestream & Chat"
hubsite_service_owncast_priority: 1000
# /role-specific:owncast

# role-specific:peertube
# Peertube
hubsite_service_peertube_enabled: "{{ peertube_enabled }}"
hubsite_service_peertube_name: Peertube
hubsite_service_peertube_url: "https://{{ peertube_hostname }}{{ peertube_path_prefix }}"
hubsite_service_peertube_logo_location: "{{ role_path }}/assets/peertube.png"
hubsite_service_peertube_description: "Watch and upload videos"
hubsite_service_peertube_priority: 1000
# /role-specific:peertube

# role-specific:radicale
# Radicale
hubsite_service_radicale_enabled: "{{ radicale_enabled }}"
hubsite_service_radicale_name: Radicale
hubsite_service_radicale_url: "https://{{ radicale_hostname }}{{ radicale_path_prefix }}"
hubsite_service_radicale_logo_location: "{{ role_path }}/assets/radicale.png"
hubsite_service_radicale_description: "Sync contacts and calendars"
hubsite_service_radicale_priority: 1000
# /role-specific:radicale

# role-specific:send
# Send
hubsite_service_send_enabled: "{{ send_enabled }}"
hubsite_service_send_name: Send
hubsite_service_send_url: "https://{{ send_hostname }}{{ send_path_prefix }}"
hubsite_service_send_logo_location: ""
hubsite_service_send_description: "Send end-to-end encrypted files to others with a link."
hubsite_service_send_priority: 1000
# /role-specific:send

# role-specific:syncthing
# Syncthing
hubsite_service_syncthing_enabled: "{{ syncthing_enabled }}"
hubsite_service_syncthing_name: Syncthing
hubsite_service_syncthing_url: "https://{{ syncthing_hostname }}{{ syncthing_path_prefix }}"
hubsite_service_syncthing_logo_location: "{{ role_path }}/assets/syncthing.png"
hubsite_service_syncthing_description: "Sync your files"
hubsite_service_syncthing_priority: 1000
# /role-specific:syncthing

# role-specific:tandoor
# tandoor
hubsite_service_tandoor_enabled: "{{ tandoor_enabled }}"
hubsite_service_tandoor_name: tandoor
hubsite_service_tandoor_url: "https://{{ tandoor_hostname }}{{ tandoor_path_prefix }}"
hubsite_service_tandoor_logo_location: "{{ role_path }}/assets/tandoor.png"
hubsite_service_tandoor_description: "The recipe manager that allows you to manage your ever growing collection of digital recipes."
hubsite_service_tandoor_priority: 1000
# /role-specific:tandoor

# role-specific:uptime_kuma
# Uptime Kuma
hubsite_service_uptime_kuma_enabled: "{{ uptime_kuma_enabled }}"
hubsite_service_uptime_kuma_name: Uptime Kuma
hubsite_service_uptime_kuma_url: "https://{{ uptime_kuma_hostname }}{{ uptime_kuma_path_prefix }}"
hubsite_service_uptime_kuma_logo_location: "{{ role_path }}/assets/uptime-kuma.png"
hubsite_service_uptime_kuma_description: "Check the status of the services"
hubsite_service_uptime_kuma_priority: 1000
# /role-specific:uptime_kuma

# role-specific:vaultwarden
# Vaultwarden
# The vaultwarden service link is deactivated by default for security reasons, see: https://github.com/dani-garcia/vaultwarden/wiki/Hardening-Guide#hiding-under-a-subdir
hubsite_service_vaultwarden_enabled: false
hubsite_service_vaultwarden_name: Vaultwarden
hubsite_service_vaultwarden_url: "https://{{ vaultwarden_hostname }}{{ vaultwarden_path_prefix }}"
hubsite_service_vaultwarden_logo_location: "{{ role_path }}/assets/vaultwarden.png"
hubsite_service_vaultwarden_description: "Securely access your passwords"
hubsite_service_vaultwarden_priority: 1000
# /role-specific:vaultwarden

# role-specific:woodpecker_ci_server
# Woodpecker CI
hubsite_service_woodpecker_ci_enabled: "{{ woodpecker_ci_server_enabled }}"
hubsite_service_woodpecker_ci_name: Woodpecker CI
hubsite_service_woodpecker_ci_url: "https://{{ woodpecker_ci_server_hostname }}"
hubsite_service_woodpecker_ci_logo_location: "{{ role_path }}/assets/woodpecker.png"
hubsite_service_woodpecker_ci_description: "Check you CI"
hubsite_service_woodpecker_ci_priority: 1000
# /role-specific:woodpecker_ci_server

# role-specific:writefreely
# writefreely
hubsite_service_writefreely_enabled: "{{ writefreely_enabled }}"
hubsite_service_writefreely_name: writefreely
hubsite_service_writefreely_url: "https://{{ writefreely_hostname }}"
hubsite_service_writefreely_logo_location: "{{ role_path }}/assets/writefreely.png"
hubsite_service_writefreely_description: "A minimalist web blog"
hubsite_service_writefreely_priority: 1000
# /role-specific:writefreely

# role-specific:yourls
# yourls
hubsite_service_yourls_enabled: "{{ yourls_enabled }}"
hubsite_service_yourls_name: YOURLS
hubsite_service_yourls_url: "https://{{ yourls_hostname }}/admin/"  # accessing to the hostname directly returns 403 error
hubsite_service_yourls_logo_location: ""
hubsite_service_yourls_description: "Your Own URL Shortener, on your server"
hubsite_service_yourls_priority: 1000
# /role-specific:yourls

# role-specific:forgejo
# Forgejo
hubsite_service_forgejo_enabled: "{{ forgejo_enabled }}"
hubsite_service_forgejo_name: Forgejo
hubsite_service_forgejo_url: "https://{{ forgejo_hostname }}{{ forgejo_path_prefix }}"
hubsite_service_forgejo_logo_location: "{{ role_path }}/assets/forgejo.png"
hubsite_service_forgejo_description: "Another git service"
hubsite_service_forgejo_priority: 1000
# /role-specific:forgejo

mash_playbook_hubsite_service_list_auto_itemized:
  # Dummy entry, which is not role-specific.
  # Ensures there's at least one entry defined in the list.
  - "{{ omit }}"

  # role-specific:adguard_home
  - |-
    {{
      ({
        'name': hubsite_service_adguard_home_name,
        'url': hubsite_service_adguard_home_url,
        'logo_location': hubsite_service_adguard_home_logo_location,
        'description': hubsite_service_adguard_home_description,
        'priority': hubsite_service_adguard_home_priority,
      } if hubsite_service_adguard_home_enabled else omit)
    }}
  # /role-specific:adguard_home

  # role-specific:authentik
  - |-
    {{
      ({
        'name': hubsite_service_authentik_name,
        'url': hubsite_service_authentik_url,
        'logo_location': hubsite_service_authentik_logo_location,
        'description': hubsite_service_authentik_description,
        'priority': hubsite_service_adguard_home_priority,
      } if hubsite_service_authentik_enabled else omit)
    }}
  # /role-specific:authentik

  # role-specific:appsmith
  - |-
    {{
      ({
        'name': hubsite_service_appsmith_name,
        'url': hubsite_service_appsmith_url,
        'logo_location': hubsite_service_appsmith_logo_location,
        'description': hubsite_service_appsmith_description,
        'priority': hubsite_service_appsmith_priority,
      } if hubsite_service_appsmith_enabled else omit)
    }}
  # /role-specific:appsmith

  # role-specific:docker_registry_browser
  - |-
    {{
      ({
        'name': hubsite_service_docker_registry_browser_name,
        'url': hubsite_service_docker_registry_browser_url,
        'logo_location': hubsite_service_docker_registry_browser_logo_location,
        'description': hubsite_service_docker_registry_browser_description,
        'priority': hubsite_service_docker_registry_browser_priority,
      } if hubsite_service_docker_registry_browser_enabled else omit)
    }}
  # /role-specific:docker_registry_browser

  # role-specific:etherpad
  - |-
    {{
      ({
        'name': hubsite_service_etherpad_name,
        'url': hubsite_service_etherpad_url,
        'logo_location': hubsite_service_etherpad_logo_location,
        'description': hubsite_service_etherpad_description,
        'priority': hubsite_service_etherpad_priority,
      } if hubsite_service_etherpad_enabled else omit)
    }}
  # /role-specific:etherpad

  # role-specific:firezone
  - |-
    {{
      ({
        'name': hubsite_service_firezone_name,
        'url': hubsite_service_firezone_url,
        'logo_location': hubsite_service_firezone_logo_location,
        'description': hubsite_service_firezone_description,
        'priority': hubsite_service_firezone_priority,
      } if hubsite_service_firezone_enabled else omit)
    }}
  # /role-specific:firezone

  # role-specific:focalboard
  - |-
    {{
      ({
        'name': hubsite_service_focalboard_name,
        'url': hubsite_service_focalboard_url,
        'logo_location': hubsite_service_focalboard_logo_location,
        'description': hubsite_service_focalboard_description,
        'priority': hubsite_service_focalboard_priority,
      } if hubsite_service_focalboard_enabled else omit)
    }}
  # /role-specific:focalboard

  # role-specific:freshrss
  - |-
    {{
      ({
        'name': hubsite_service_freshrss_name,
        'url': hubsite_service_freshrss_url,
        'logo_location': hubsite_service_freshrss_logo_location,
        'description': hubsite_service_freshrss_description,
        'priority': hubsite_service_freshrss_priority,
      } if hubsite_service_freshrss_enabled else omit)
    }}
  # /role-specific:freshrss

  # role-specific:funkwhale
  - |-
    {{
      ({
        'name': hubsite_service_funkwhale_name,
        'url': hubsite_service_funkwhale_url,
        'logo_location': hubsite_service_funkwhale_logo_location,
        'description': hubsite_service_funkwhale_description,
        'priority': hubsite_service_funkwhale_priority,
      } if hubsite_service_funkwhale_enabled else omit)
    }}
  # /role-specific:funkwhale

  # role-specific:gitea
  - |-
    {{
      ({
        'name': hubsite_service_gitea_name,
        'url': hubsite_service_gitea_url,
        'logo_location': hubsite_service_gitea_logo_location,
        'description': hubsite_service_gitea_description,
        'priority': hubsite_service_gitea_priority,
      } if hubsite_service_gitea_enabled else omit)
    }}
  # /role-specific:gitea

  # role-specific:gotosocial
  - |-
    {{
      ({
        'name': hubsite_service_gotosocial_name,
        'url': hubsite_service_gotosocial_url,
        'logo_location': hubsite_service_gotosocial_logo_location,
        'description': hubsite_service_gotosocial_description,
        'priority': hubsite_service_gotosocial_priority,
      } if hubsite_service_gotosocial_enabled else omit)
    }}
  # /role-specific:gotosocial

  # role-specific:grafana
  - |-
    {{
      ({
        'name': hubsite_service_grafana_name,
        'url': hubsite_service_grafana_url,
        'logo_location': hubsite_service_grafana_logo_location,
        'description': hubsite_service_grafana_description,
        'priority': hubsite_service_grafana_priority,
      } if hubsite_service_grafana_enabled else omit)
    }}
  # /role-specific:grafana

  # role-specific:healthchecks
  - |-
    {{
      ({
        'name': hubsite_service_healthchecks_name,
        'url': hubsite_service_healthchecks_url,
        'logo_location': hubsite_service_healthchecks_logo_location,
        'description': hubsite_service_healthchecks_description,
        'priority': hubsite_service_healthchecks_priority,
      } if hubsite_service_healthchecks_enabled else omit)
    }}
  # /role-specific:healthchecks

  # role-specific:ihatemoney
  - |-
    {{
      ({
        'name': hubsite_service_ihatemoney_name,
        'url': hubsite_service_ihatemoney_url,
        'logo_location': hubsite_service_ihatemoney_logo_location,
        'description': hubsite_service_ihatemoney_description,
        'priority': hubsite_service_ihatemoney_priority,
      } if hubsite_service_ihatemoney_enabled else omit)
    }}
  # /role-specific:ihatemoney

  # role-specific:joplin_server
  - |-
    {{
      ({
        'name': hubsite_service_joplin_server_name,
        'url': hubsite_service_joplin_server_url,
        'logo_location': hubsite_service_joplin_server_logo_location,
        'description': hubsite_service_joplin_server_description,
        'priority': hubsite_service_joplin_server_priority,
      } if hubsite_service_joplin_server_enabled else omit)
    }}
  # /role-specific:joplin_server

  # role-specific:keycloak
  - |-
    {{
      ({
        'name': hubsite_service_keycloak_name,
        'url': hubsite_service_keycloak_url,
        'logo_location': hubsite_service_keycloak_logo_location,
        'description': hubsite_service_keycloak_description,
        'priority': hubsite_service_keycloak_priority,
      } if hubsite_service_keycloak_enabled else omit)
    }}
  # /role-specific:keycloak

  # role-specific:labelstudio
  - |-
    {{
      ({
        'name': hubsite_service_labelstudio_name,
        'url': hubsite_service_labelstudio_url,
        'logo_location': hubsite_service_labelstudio_logo_location,
        'description': hubsite_service_labelstudio_description,
        'priority': hubsite_service_labelstudio_priority,
      } if hubsite_service_labelstudio_enabled else omit)
    }}
  # /role-specific:labelstudio

 # role-specific:languagetool
  - |-
    {{
      ({
        'name': hubsite_service_languagetool_name,
        'url': hubsite_service_languagetool_url,
        'logo_location': hubsite_service_languagetool_logo_location,
        'description': hubsite_service_languagetool_description,
        'priority': hubsite_service_languagetool_priority,
      } if hubsite_service_languagetool_enabled else omit)
    }}
  # /role-specific:languagetool

  # role-specific:linkding
  - |-
    {{
      ({
        'name': hubsite_service_linkding_name,
        'url': hubsite_service_linkding_url,
        'logo_location': hubsite_service_linkding_logo_location,
        'description': hubsite_service_linkding_description,
        'priority': hubsite_service_linkding_priority,
      } if hubsite_service_linkding_enabled else omit)
    }}
  # /role-specific:linkding

  # role-specific:miniflux
  - |-
    {{
      ({
        'name': hubsite_service_miniflux_name,
        'url': hubsite_service_miniflux_url,
        'logo_location': hubsite_service_miniflux_logo_location,
        'description': hubsite_service_miniflux_description,
        'priority': hubsite_service_miniflux_priority,
      } if hubsite_service_miniflux_enabled else omit)
    }}
  # /role-specific:miniflux

  # role-specific:navidrome
  - |-
    {{
      ({
        'name': hubsite_service_navidrome_name,
        'url': hubsite_service_navidrome_url,
        'logo_location': hubsite_service_navidrome_logo_location,
        'description': hubsite_service_navidrome_description,
        'priority': hubsite_service_navidrome_priority,
      } if hubsite_service_navidrome_enabled else omit)
    }}
  # /role-specific:navidrome

  # role-specific:n8n
  - |-
    {{
      ({
        'name': hubsite_service_n8n_name,
        'url': hubsite_service_n8n_url,
        'logo_location': hubsite_service_n8n_logo_location,
        'description': hubsite_service_n8n_description,
        'priority': hubsite_service_n8n_priority,
      } if hubsite_service_n8n_enabled else omit)
    }}
  # /role-specific:n8n

  # role-specific:nextcloud
  - |-
    {{
      ({
        'name': hubsite_service_nextcloud_name,
        'url': hubsite_service_nextcloud_url,
        'logo_location': hubsite_service_nextcloud_logo_location,
        'description': hubsite_service_nextcloud_description,
        'priority': hubsite_service_nextcloud_priority,
      } if hubsite_service_nextcloud_enabled else omit)
    }}
  # /role-specific:nextcloud

  # role-specific:ntfy
  - |-
    {{
      ({
        'name': hubsite_service_ntfy_name,
        'url': hubsite_service_ntfy_url,
        'logo_location': hubsite_service_ntfy_logo_location,
        'description': hubsite_service_ntfy_description,
        'priority': hubsite_service_ntfy_priority,
      } if hubsite_service_ntfy_enabled else omit)
    }}
  # /role-specific:ntfy

  # role-specific:owncast
  - |-
    {{
      ({
        'name': hubsite_service_owncast_name,
        'url': hubsite_service_owncast_url,
        'logo_location': hubsite_service_owncast_logo_location,
        'description': hubsite_service_owncast_description,
        'priority': hubsite_service_owncast_priority,
      } if hubsite_service_owncast_enabled else omit)
    }}
  # /role-specific:owncast

  # role-specific:peertube
  - |-
    {{
      ({
        'name': hubsite_service_peertube_name,
        'url': hubsite_service_peertube_url,
        'logo_location': hubsite_service_peertube_logo_location,
        'description': hubsite_service_peertube_description,
        'priority': hubsite_service_peertube_priority,
      } if hubsite_service_peertube_enabled else omit)
    }}
  # /role-specific:peertube

  # role-specific:radicale
  - |-
    {{
      ({
        'name': hubsite_service_radicale_name,
        'url': hubsite_service_radicale_url,
        'logo_location': hubsite_service_radicale_logo_location,
        'description': hubsite_service_radicale_description,
        'priority': hubsite_service_radicale_priority,
      } if hubsite_service_radicale_enabled else omit)
    }}
  # /role-specific:radicale

  # role-specific:uptime_kuma
  - |-
    {{
      ({
        'name': hubsite_service_uptime_kuma_name,
        'url': hubsite_service_uptime_kuma_url,
        'logo_location': hubsite_service_uptime_kuma_logo_location,
        'description': hubsite_service_uptime_kuma_description,
        'priority': hubsite_service_uptime_kuma_priority,
      } if hubsite_service_uptime_kuma_enabled else omit)
    }}
  # /role-specific:uptime_kuma

  # role-specific:send
  - |-
    {{
      ({
        'name': hubsite_service_send_name,
        'url': hubsite_service_send_url,
        'logo_location': hubsite_service_send_logo_location,
        'description': hubsite_service_send_description,
        'priority': hubsite_service_send_priority,
      } if hubsite_service_send_enabled else omit)
    }}
  # /role-specific:send

  # role-specific:syncthing
  - |-
    {{
      ({
        'name': hubsite_service_syncthing_name,
        'url': hubsite_service_syncthing_url,
        'logo_location': hubsite_service_syncthing_logo_location,
        'description': hubsite_service_syncthing_description,
        'priority': hubsite_service_syncthing_priority
      } if hubsite_service_syncthing_enabled else omit)
    }}
  # /role-specific:syncthing

  # role-specific:tandoor
  - |-
    {{
      ({
        'name': hubsite_service_tandoor_name,
        'url': hubsite_service_tandoor_url,
        'logo_location': hubsite_service_tandoor_logo_location,
        'description': hubsite_service_tandoor_description,
        'priority': hubsite_service_tandoor_priority,
      } if hubsite_service_tandoor_enabled else omit)
    }}
  # /role-specific:tandoor

  # role-specific:vaultwarden
  - |-
    {{
      ({
        'name': hubsite_service_vaultwarden_name,
        'url': hubsite_service_vaultwarden_url,
        'logo_location': hubsite_service_vaultwarden_logo_location,
        'description': hubsite_service_vaultwarden_description,
        'priority': hubsite_service_vaultwarden_priority
      } if hubsite_service_vaultwarden_enabled else omit)
    }}
  # /role-specific:vaultwarden

  # role-specific:woodpecker_ci_server
  - |-
    {{
      ({
        'name': hubsite_service_woodpecker_ci_name,
        'url': hubsite_service_woodpecker_ci_url,
        'logo_location': hubsite_service_woodpecker_ci_logo_location,
        'description': hubsite_service_woodpecker_ci_description,
        'priority': hubsite_service_woodpecker_ci_priority
      } if hubsite_service_woodpecker_ci_enabled else omit)
    }}
  # /role-specific:woodpecker_ci_server

  # role-specific:writefreely
  - |-
    {{
      ({
        'name': hubsite_service_writefreely_name,
        'url': hubsite_service_writefreely_url,
        'logo_location': hubsite_service_writefreely_logo_location,
        'description': hubsite_service_writefreely_description,
        'priority': hubsite_service_writefreely_priority,
      } if hubsite_service_writefreely_enabled else omit)
    }}
  # /role-specific:writefreely

  # role-specific:yourls
  - |-
    {{
      ({
        'name': hubsite_service_yourls_name,
        'url': hubsite_service_yourls_url,
        'logo_location': hubsite_service_yourls_logo_location,
        'description': hubsite_service_yourls_description,
        'priority': hubsite_service_yourls_priority,
      } if hubsite_service_yourls_enabled else omit)
    }}
  # /role-specific:yourls

hubsite_service_list_auto: "{{ mash_playbook_hubsite_service_list_auto_itemized | reject('equalto', omit) }}"

########################################################################
#                                                                      #
# /hubsite                                                             #
#                                                                      #
########################################################################
# /role-specific:hubsite


# role-specific:ihatemoney
########################################################################
#                                                                      #
# ihatemoney                                                           #
#                                                                      #
########################################################################

ihatemoney_enabled: false

ihatemoney_identifier: "{{ mash_playbook_service_identifier_prefix }}ihatemoney"

ihatemoney_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}ihatemoney"

ihatemoney_uid: "{{ mash_playbook_uid }}"
ihatemoney_gid: "{{ mash_playbook_gid }}"

ihatemoney_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and ihatemoney_database_hostname == postgres_identifier else [])
  }}

ihatemoney_systemd_wanted_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and ihatemoney_email_host == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

ihatemoney_container_additional_networks_auto: |
  {{
    (
      ([postgres_container_network] if postgres_enabled and ihatemoney_database_hostname == postgres_identifier and ihatemoney_container_network != postgres_container_network else [])
      +
      ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and ihatemoney_email_host == exim_relay_identifier | default('mash-exim-relay') and ihatemoney_container_network != exim_relay_container_network) else [])
      +
      ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    ) | unique
  }}

ihatemoney_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
ihatemoney_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

ihatemoney_environment_variable_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.imoney', rounds=655555) | to_uuid }}"

# role-specific:exim_relay
ihatemoney_email_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
ihatemoney_email_port: "{{ 8025 if exim_relay_enabled else '' }}"
ihatemoney_default_from_email: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
ihatemoney_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
ihatemoney_database_port: "{{ '5432' if postgres_enabled else '' }}"
ihatemoney_database_username: "ihatemoney"
ihatemoney_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.ihatemoney', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
ihatemoney_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
ihatemoney_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /ihatemoney                                                          #
#                                                                      #
########################################################################
# /role-specific:ihatemoney



# role-specific:ilmo
########################################################################
#                                                                      #
# ilmo                                                                 #
#                                                                      #
########################################################################

ilmo_enabled: false

ilmo_identifier: "{{ mash_playbook_service_identifier_prefix }}ilmo"

ilmo_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}ilmo"

ilmo_uid: "{{ mash_playbook_uid }}"
ilmo_gid: "{{ mash_playbook_gid }}"

ilmo_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.ilmo', rounds=655555) | to_uuid }}"

ilmo_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and ilmo_database_host == postgres_identifier else [])
  }}

ilmo_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and ilmo_database_host == postgres_identifier and ilmo_container_network != postgres_container_network else [])
  }}

ilmo_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
ilmo_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
ilmo_database_host: "{{ postgres_identifier if postgres_enabled else '' }}"
ilmo_database_port: "{{ '5432' if postgres_enabled else '' }}"
ilmo_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.ilmo', rounds=655555) | to_uuid }}"
ilmo_database_username: "ilmo"
# /role-specific:postgres

# role-specific:traefik
ilmo_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
ilmo_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /ilmo                                                                #
#                                                                      #
########################################################################
# /role-specific:ilmo



# role-specific:infisical
########################################################################
#                                                                      #
# infisical                                                            #
#                                                                      #
########################################################################

infisical_enabled: false

infisical_identifier: "{{ mash_playbook_service_identifier_prefix }}infisical"

infisical_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}infisical"

infisical_uid: "{{ mash_playbook_uid }}"
infisical_gid: "{{ mash_playbook_gid }}"

infisical_backend_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([mongodb_identifier ~ '.service'] if mongodb_enabled and infisical_mongodb_hostname == mongodb_identifier else [])
  }}

infisical_backend_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([mongodb_container_network] if mongodb_enabled and infisical_mongodb_hostname == mongodb_identifier and infisical_backend_container_network != mongodb_container_network else [])
  }}

infisical_backend_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
infisical_backend_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
infisical_frontend_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
infisical_frontend_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# Intentionally not auto-generating infisical_backend_environment_variable_encryption_key here.
# We prefer it to be explicit as it seems important that it remains stable.

infisical_backend_environment_variable_jwt_signup_secret: "{{ ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'inf.jwt.signup', rounds=655555) | to_uuid | replace('-', ''))[0:32] }}"
infisical_backend_environment_variable_jwt_refresh_secret: "{{ ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'inf.jwt.r', rounds=655555) | to_uuid | replace('-', ''))[0:32] }}"
infisical_backend_environment_variable_jwt_auth_secret: "{{ ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'inf.jwt.a', rounds=655555) | to_uuid | replace('-', ''))[0:32] }}"
infisical_backend_environment_variable_jwt_service_secret: "{{ ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'inf.jwt.svc', rounds=655555) | to_uuid | replace('-', ''))[0:32] }}"

infisical_frontend_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

# role-specific:mongodb
infisical_mongodb_hostname: "{{ mongodb_identifier if mongodb_enabled else '' }}"
infisical_mongodb_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'infisical.db', rounds=655555) | to_uuid }}"
infisical_mongodb_auth_source: "{{ infisical_mongodb_db_name }}"
# /role-specific:mongodb

# role-specific:traefik
infisical_backend_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
infisical_backend_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
infisical_frontend_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
infisical_frontend_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /infisical                                                           #
#                                                                      #
########################################################################
# /role-specific:infisical



# role-specific:influxdb
########################################################################
#                                                                      #
# influxdb                                                             #
#                                                                      #
########################################################################

influxdb_enabled: false

influxdb_identifier: "{{ mash_playbook_service_identifier_prefix }}influxdb"

influxdb_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}influxdb"

influxdb_uid: "{{ mash_playbook_uid }}"
influxdb_gid: "{{ mash_playbook_gid }}"

influxdb_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if (influxdb_container_labels_traefik_enabled and mash_playbook_reverse_proxyable_services_additional_network) else [])
  }}

influxdb_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
influxdb_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
influxdb_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
influxdb_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /influxdb                                                            #
#                                                                      #
########################################################################
# /role-specific:influxdb



# role-specific:jackett
########################################################################
#                                                                      #
# jackett                                                              #
#                                                                      #
########################################################################

jackett_enabled: false

jackett_identifier: "{{ mash_playbook_service_identifier_prefix }}jackett"

jackett_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}jackett"

jackett_uid: "{{ mash_playbook_uid }}"
jackett_gid: "{{ mash_playbook_gid }}"

jackett_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

jackett_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
jackett_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
jackett_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
jackett_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /jackett                                                             #
#                                                                      #
########################################################################
# /role-specific:jackett



# role-specific:jitsi
########################################################################
#                                                                      #
# jitsi                                                                #
#                                                                      #
########################################################################

jitsi_enabled: false

jitsi_architecture: "{{ mash_playbook_architecture }}"

jitsi_identifier: "{{ mash_playbook_service_identifier_prefix }}jitsi"

jitsi_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}jitsi"

jitsi_uid: "{{ mash_playbook_uid }}"
jitsi_gid: "{{ mash_playbook_gid }}"

jitsi_user_username: "{{ mash_playbook_user_username }}"

jitsi_web_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

jitsi_prosody_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

jitsi_jvb_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

jitsi_jibri_xmpp_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'jibri', rounds=655555) | to_uuid }}"
jitsi_jicofo_auth_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'jicofo', rounds=655555) | to_uuid }}"
jitsi_jvb_auth_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'jvb', rounds=655555) | to_uuid }}"

jitsi_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
jitsi_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
jitsi_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
jitsi_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /jitsi                                                               #
#                                                                      #
########################################################################
# /role-specific:jitsi



# role-specific:joplin_server
########################################################################
#                                                                      #
# joplin_server                                                        #
#                                                                      #
########################################################################

joplin_server_enabled: false

joplin_server_identifier: "{{ mash_playbook_service_identifier_prefix }}joplin-server"

joplin_server_uid: "{{ mash_playbook_uid }}"
joplin_server_gid: "{{ mash_playbook_gid }}"

joplin_server_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}joplin-server"

joplin_server_systemd_required_services_list_auto: |
 {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and joplin_server_environment_variable_database_host == postgres_identifier else [])
  }}

joplin_server_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled | default(false) and joplin_server_environment_variable_database_host == postgres_identifier and joplin_server_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and joplin_server_environment_variable_mailer_host == exim_relay_identifier | default('mash-exim-relay') and joplin_server_container_network != exim_relay_container_network) else [])
  }}

joplin_server_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
joplin_server_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
joplin_server_environment_variable_mailer_enabled: "{{ exim_relay_enabled }}"
joplin_server_environment_variable_mailer_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
joplin_server_environment_variable_mailer_port: 8025
joplin_server_environment_variable_mailer_noreply_email: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
joplin_server_environment_variable_mailer_security: MailerSecurity.None
# /role-specific:exim_relay

# role-specific:postgres
joplin_server_environment_variable_database_host: "{{ postgres_identifier if postgres_enabled else '' }}"
joplin_server_environment_variable_database_port: "{{ '5432' if postgres_enabled else '' }}"
joplin_server_environment_variable_database_user: "{{ joplin_server_identifier }}"
joplin_server_environment_variable_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.joplinserver', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
joplin_server_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
joplin_server_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /joplin_server                                                       #
#                                                                      #
########################################################################
# /role-specific:joplin_server



# role-specific:keycloak
########################################################################
#                                                                      #
# keycloak                                                             #
#                                                                      #
########################################################################

keycloak_enabled: false

keycloak_identifier: "{{ mash_playbook_service_identifier_prefix }}keycloak"

keycloak_uid: "{{ mash_playbook_uid }}"
keycloak_gid: "{{ mash_playbook_gid }}"

keycloak_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}keycloak"

keycloak_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and keycloak_database_hostname == postgres_identifier else [])
  }}

keycloak_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and keycloak_database_hostname == postgres_identifier and keycloak_container_network != postgres_container_network else [])
  }}

keycloak_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
keycloak_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

keycloak_container_labels_metrics_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
keycloak_container_labels_metrics_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ keycloak_identifier }}"
keycloak_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
keycloak_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

keycloak_environment_variable_kc_metrics_enabled: "{{ prometheus_enabled | default(false) or mash_playbook_metrics_exposure_enabled }}"

# role-specific:postgres
keycloak_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
keycloak_database_port: "{{ '5432' if postgres_enabled else '' }}"
keycloak_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.keycloak', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
keycloak_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
keycloak_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /keycloak                                                            #
#                                                                      #
########################################################################
# /role-specific:keycloak



# role-specific:keydb
########################################################################
#                                                                      #
# keydb                                                                #
#                                                                      #
########################################################################

keydb_enabled: false

keydb_identifier: "{{ mash_playbook_service_identifier_prefix }}keydb"

keydb_uid: "{{ mash_playbook_uid }}"
keydb_gid: "{{ mash_playbook_gid }}"

keydb_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}keydb"

keydb_arch: |-
  {{
    ({
      'amd64': 'x86_64',
      'arm32': 'arm32',
      'arm64': 'arm64',
    })[mash_playbook_architecture]
  }}

########################################################################
#                                                                      #
# /keydb                                                               #
#                                                                      #
########################################################################
# /role-specific:keydb



# role-specific:labelstudio
########################################################################
#                                                                      #
# labelstudio                                                          #
#                                                                      #
########################################################################

labelstudio_enabled: false

labelstudio_identifier: "{{ mash_playbook_service_identifier_prefix }}labelstudio"

labelstudio_uid: "{{ mash_playbook_uid }}"
labelstudio_gid: "{{ mash_playbook_gid }}"

labelstudio_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}labelstudio"

labelstudio_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and labelstudio_database_hostname == postgres_identifier and labelstudio_container_network != postgres_container_network else [])
  }}

labelstudio_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
labelstudio_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
labelstudio_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
labelstudio_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

labelstudio_postgres_backend_enabled: "{{ postgres_enabled }}"

# role-specific:postgres
labelstudio_database_name: "labelstudio"
labelstudio_database_username: "labelstudio"
labelstudio_database_port: "{{ '5432' if postgres_enabled else '' }}"
labelstudio_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
labelstudio_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.labelstudio', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
labelstudio_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
labelstudio_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /labelstudio                                                         #
#                                                                      #
########################################################################
# /role-specific:labelstudio



# role-specific:lago
########################################################################
#                                                                      #
# lago                                                                 #
#                                                                      #
########################################################################

lago_enabled: false

lago_architecture: "{{ mash_playbook_architecture }}"

lago_identifier: "{{ mash_playbook_service_identifier_prefix }}lago"

lago_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}lago"

lago_uid: "{{ mash_playbook_uid }}"
lago_gid: "{{ mash_playbook_gid }}"

lago_api_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and lago_database_hostname == postgres_identifier and lago_api_container_network != postgres_container_network else [])
  }}

lago_front_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

lago_api_environment_variable_secret_key_base: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'lago.sec.key', rounds=655555) | to_uuid }}"
lago_api_environment_variable_encryption_primary_key: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'lago.enc.primary', rounds=655555) | to_uuid }}"
lago_api_environment_variable_encryption_deterministic_key: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'lago.deter.key', rounds=655555) | to_uuid }}"
lago_api_environment_variable_encryption_key_derivation_salt: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'lago.deriv.salt', rounds=655555) | to_uuid }}"

lago_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
lago_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
lago_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
lago_database_port: "{{ '5432' if postgres_enabled else '' }}"
lago_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'lago.db', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
lago_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
lago_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /lago                                                                #
#                                                                      #
########################################################################
# /role-specific:lago



# role-specific:languagetool
########################################################################
#                                                                      #
# languagetool                                                         #
#                                                                      #
########################################################################

languagetool_enabled: false

languagetool_identifier: "{{ mash_playbook_service_identifier_prefix }}languagetool"

languagetool_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}languagetool"

languagetool_uid: "{{ mash_playbook_uid }}"
languagetool_gid: "{{ mash_playbook_gid }}"

languagetool_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

languagetool_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
languagetool_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
languagetool_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
languagetool_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /languagetool                                                        #
#                                                                      #
########################################################################
# /role-specific:languagetool



# role-specific:loki
########################################################################
#                                                                      #
# loki                                                                 #
#                                                                      #
########################################################################

loki_enabled: false

loki_identifier: "{{ mash_playbook_service_identifier_prefix }}loki"

loki_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}loki"

loki_uid: "{{ mash_playbook_uid }}"
loki_gid: "{{ mash_playbook_gid }}"

loki_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
loki_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and loki_hostname | length > 0 }}"
loki_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
loki_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
loki_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /loki                                                                #
#                                                                      #
########################################################################
# /role-specific:loki



# role-specific:linkding
########################################################################
#                                                                      #
# linkding                                                             #
#                                                                      #
########################################################################

linkding_enabled: false

linkding_identifier: "{{ mash_playbook_service_identifier_prefix }}linkding"

linkding_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}linkding"

linkding_uid: "{{ mash_playbook_uid }}"
linkding_gid: "{{ mash_playbook_gid }}"

linkding_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and linkding_database_hostname == postgres_identifier else [])
  }}

linkding_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and linkding_database_hostname == postgres_identifier and linkding_container_network != postgres_container_network else [])
  }}

linkding_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
linkding_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
linkding_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
linkding_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'linkding.db', rounds=655555) | to_uuid }}"
linkding_database_engine: "{{ 'postgres' if postgres_enabled and linkding_database_hostname == postgres_connection_hostname else 'sqlite' }}"
# /role-specific:postgres

# role-specific:traefik
linkding_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
linkding_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /linkding                                                            #
#                                                                      #
########################################################################
# /role-specific:linkding



# role-specific:miniflux
########################################################################
#                                                                      #
# miniflux                                                             #
#                                                                      #
########################################################################

miniflux_enabled: false

miniflux_identifier: "{{ mash_playbook_service_identifier_prefix }}miniflux"

miniflux_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}miniflux"

miniflux_uid: "{{ mash_playbook_uid }}"
miniflux_gid: "{{ mash_playbook_gid }}"

miniflux_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and miniflux_database_hostname == postgres_identifier else [])
  }}

miniflux_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and miniflux_database_hostname == postgres_identifier and miniflux_container_network != postgres_container_network else [])
  }}

miniflux_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
miniflux_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
miniflux_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
miniflux_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

# role-specific:postgres
miniflux_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
miniflux_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'miniflux.db', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
miniflux_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
miniflux_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /miniflux                                                            #
#                                                                      #
########################################################################
# /role-specific:miniflux



# role-specific:mobilizon
########################################################################
#                                                                      #
# mobilizon                                                            #
#                                                                      #
########################################################################

mobilizon_enabled: false

mobilizon_identifier: "{{ mash_playbook_service_identifier_prefix }}mobilizon"

mobilizon_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}mobilizon"

mobilizon_uid: "{{ mash_playbook_uid }}"
mobilizon_gid: "{{ mash_playbook_gid }}"

mobilizon_secret_key: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'sk.mobilizon', rounds=655555) | to_uuid }}"
mobilizon_secret_key_base: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'skb.mobilizon', rounds=655555) | to_uuid }}"

mobilizon_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgis_identifier ~ '.service'] if postgis_enabled and mobilizon_database_hostname == postgis_identifier else [])
  }}

mobilizon_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgis_container_network] if postgis_enabled and mobilizon_database_hostname == postgis_identifier and mobilizon_container_network != postgis_container_network else [])
  }}

mobilizon_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
mobilizon_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgis
mobilizon_database_hostname: "{{ postgis_identifier if postgis_enabled else '' }}"
mobilizon_database_name: "mobilizon"
mobilizon_database_port: "{{ '5432' if postgis_enabled else '' }}"
mobilizon_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.mobilizon', rounds=655555) | to_uuid }}"
mobilizon_database_username: "mobilizon"
# /role-specific:postgis

# role-specific:traefik
mobilizon_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
mobilizon_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /mobilizon                                                           #
#                                                                      #
########################################################################
# /role-specific:mobilizon



# role-specific:mongodb
########################################################################
#                                                                      #
# mongodb                                                              #
#                                                                      #
########################################################################

mongodb_enabled: false

mongodb_identifier: "{{ mash_playbook_service_identifier_prefix }}mongodb"

mongodb_uid: "{{ mash_playbook_uid }}"
mongodb_gid: "{{ mash_playbook_gid }}"

mongodb_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}mongodb"

mongodb_managed_databases_auto: |
  {{
    ([{
      'name': infisical_mongodb_db_name,
      'username': infisical_mongodb_username,
      'password': infisical_mongodb_password,
    }] if infisical_enabled and infisical_mongodb_hostname == mongodb_identifier else [])
  }}

########################################################################
#                                                                      #
# /mongodb                                                             #
#                                                                      #
########################################################################
# /role-specific:mongodb


# role-specific:mosquitto
########################################################################
#                                                                      #
# mosquitto                                                            #
#                                                                      #
########################################################################

mosquitto_enabled: false

mosquitto_identifier: "{{ mash_playbook_service_identifier_prefix }}mosquitto"

mosquitto_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}mosquitto"

mosquitto_uid: "{{ mash_playbook_uid }}"
mosquitto_gid: "{{ mash_playbook_gid }}"

########################################################################
#                                                                      #
# /mosquitto                                                           #
#                                                                      #
########################################################################
# /role-specific:mosquitto


# role-specific:mrs
########################################################################
#                                                                      #
# mrs                                                                  #
#                                                                      #
########################################################################

mrs_enabled: false

mrs_identifier: "{{ mash_playbook_service_identifier_prefix }}mrs"

mrs_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}mrs"

mrs_uid: "{{ mash_playbook_uid }}"
mrs_gid: "{{ mash_playbook_gid }}"

mrs_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

mrs_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
mrs_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
mrs_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
mrs_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /mrs                                                                 #
#                                                                      #
########################################################################
# /role-specific:mrs



# role-specific:n8n
########################################################################
#                                                                      #
# n8n                                                                  #
#                                                                      #
########################################################################

n8n_enabled: false

n8n_identifier: "{{ mash_playbook_service_identifier_prefix }}n8n"

n8n_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}n8n"

# Please see the note attached to this comment on why we can't use mash's playbook uid and gid
# https://github.com/kinduff/ansible-docker-n8n/blob/v1.4.2/defaults/main.yml
n8n_uid: "1000"
n8n_gid: "1000"

n8n_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and n8n_database_hostname == postgres_identifier else [])
  }}

n8n_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and n8n_database_hostname == postgres_identifier and n8n_container_network != postgres_container_network else [])
  }}

n8n_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
n8n_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
n8n_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
n8n_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'n8n.db', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
n8n_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
n8n_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /n8n                                                                 #
#                                                                      #
########################################################################
# /role-specific:n8n



# role-specific:navidrome
########################################################################
#                                                                      #
# navidrome                                                            #
#                                                                      #
########################################################################

navidrome_enabled: false

navidrome_identifier: "{{ mash_playbook_service_identifier_prefix }}navidrome"

navidrome_uid: "{{ mash_playbook_uid }}"
navidrome_gid: "{{ mash_playbook_gid }}"

navidrome_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}navidrome"

navidrome_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

navidrome_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
navidrome_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
navidrome_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
navidrome_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

# role-specific:traefik
navidrome_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
navidrome_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /navidrome                                                           #
#                                                                      #
########################################################################
# /role-specific:navidrome


# role-specific:neko
########################################################################
#                                                                      #
# neko                                                                 #
#                                                                      #
########################################################################

neko_enabled: false

neko_identifier: "{{ mash_playbook_service_identifier_prefix }}neko"

neko_uid: "{{ mash_playbook_uid }}"
neko_gid: "{{ mash_playbook_gid }}"

neko_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}neko"

neko_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

neko_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
neko_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
neko_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
neko_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /neko                                                                #
#                                                                      #
########################################################################
# /role-specific:neko



# role-specific:nextcloud
########################################################################
#                                                                      #
# nextcloud                                                            #
#                                                                      #
########################################################################

nextcloud_enabled: false

nextcloud_identifier: "{{ mash_playbook_service_identifier_prefix }}nextcloud"

nextcloud_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}nextcloud"

nextcloud_uid: "{{ mash_playbook_uid }}"
nextcloud_gid: "{{ mash_playbook_gid }}"

nextcloud_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and nextcloud_database_hostname == postgres_identifier else [])
  }}

nextcloud_systemd_wanted_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and nextcloud_config_parameter_mail_smtphost == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

nextcloud_container_additional_networks_auto: |
  {{
    (
      ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
      +
      ([postgres_container_network] if postgres_enabled and nextcloud_database_hostname == postgres_identifier and nextcloud_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and nextcloud_config_parameter_mail_smtphost == exim_relay_identifier | default('mash-exim-relay') and nextcloud_container_network != exim_relay_container_network) else [])
    ) | unique
  }}

nextcloud_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
nextcloud_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
nextcloud_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
nextcloud_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

# role-specific:exim_relay
nextcloud_config_parameter_mail_smtphost: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
nextcloud_config_parameter_mail_smtpport: "{{ 8025 if exim_relay_enabled else '' }}"
nextcloud_config_parameter_mail_smtpsecure: ''
nextcloud_config_parameter_mail_smtpauth: false
nextcloud_config_parameter_mail_from_address: "{{ (exim_relay_sender_address | split('@'))[0] if exim_relay_enabled else '' }}"
nextcloud_config_parameter_mail_domain: "{{ (exim_relay_sender_address | split('@'))[1] if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
nextcloud_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
nextcloud_database_port: "{{ '5432' if postgres_enabled else '' }}"
nextcloud_database_username: "nextcloud"
nextcloud_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.nextcloud', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
nextcloud_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
nextcloud_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /nextcloud                                                           #
#                                                                      #
########################################################################
# /role-specific:nextcloud



# role-specific:netbox
########################################################################
#                                                                      #
# netbox                                                               #
#                                                                      #
########################################################################

netbox_enabled: false

netbox_identifier: "{{ mash_playbook_service_identifier_prefix }}netbox"

netbox_uid: "{{ mash_playbook_uid }}"
netbox_gid: "{{ mash_playbook_gid }}"

netbox_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}netbox"

netbox_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and netbox_database_hostname == postgres_identifier else [])
  }}

netbox_container_additional_networks_auto: |
  {{
    (
      ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
      +
      ([postgres_container_network] if postgres_enabled and netbox_database_hostname == postgres_identifier and netbox_container_network != postgres_container_network else [])
    ) | unique
  }}

netbox_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
netbox_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
netbox_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
netbox_database_port: "{{ '5432' if postgres_enabled else '' }}"
netbox_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.netbox', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
netbox_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
netbox_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /netbox                                                              #
#                                                                      #
########################################################################
# /role-specific:netbox



# role-specific:mariadb
########################################################################
#                                                                      #
# mariadb                                                              #
#                                                                      #
########################################################################

mariadb_enabled: false

mariadb_identifier: "{{ mash_playbook_service_identifier_prefix }}mariadb"

mariadb_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}mariadb"

mariadb_uid: "{{ mash_playbook_uid }}"
mariadb_gid: "{{ mash_playbook_gid }}"

mash_playbook_mariadb_managed_databases_auto_itemized:
  # Dummy entry, which is not role-specific.
  # Ensures there's at least one entry defined in the list.
  - "{{ omit }}"

  # role-specific:authelia
  - |-
    {{
      ({
        'name': authelia_config_storage_mysql_database,
        'username': authelia_config_storage_mysql_username,
        'password': authelia_config_storage_mysql_password,
      } if authelia_enabled and authelia_config_storage_mysql_host == mariadb_identifier else omit)
    }}
  # /role-specific:authelia

  # role-specific:wordpress
  - |-
    {{
      ({
        'name': wordpress_database_name,
        'username': wordpress_database_username,
        'password': wordpress_database_password,
      } if wordpress_enabled and wordpress_database_hostname == mariadb_identifier | default('mash-mariadb') else omit)
    }}
  # /role-specific:wordpress

  # role-specific:yourls
  - |-
    {{
      ({
        'name': yourls_environment_variable_db_name,
        'username': yourls_environment_variable_db_user,
        'password': yourls_environment_variable_db_pass,
      } if yourls_enabled and yourls_environment_variable_db_host_name == mariadb_identifier | default('mash-mariadb') else omit)
    }}
  # /role-specific:yourls

mariadb_managed_databases_auto: "{{ mash_playbook_mariadb_managed_databases_auto_itemized | reject('equalto', omit) }}"

########################################################################
#                                                                      #
# /mariadb                                                             #
#                                                                      #
########################################################################
# /role-specific:mariadb



# role-specific:notfellchen
########################################################################
#                                                                      #
# notfellchen                                                          #
#                                                                      #
########################################################################

notfellchen_enabled: false

notfellchen_identifier: "{{ mash_playbook_service_identifier_prefix }}notfellchen"

notfellchen_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}notfellchen"

notfellchen_uid: "{{ mash_playbook_uid }}"
notfellchen_gid: "{{ mash_playbook_gid }}"

notfellchen_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.nf', rounds=655555) | to_uuid }}"

notfellchen_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and notfellchen_database_host == postgres_identifier else [])
  }}

notfellchen_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and notfellchen_database_host == postgres_identifier and notfellchen_container_network != postgres_container_network else [])
  }}

notfellchen_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
notfellchen_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
notfellchen_sws_container_labels_traefik_enabled: "{{ notfellchen_container_labels_traefik_enabled }}"
notfellchen_sws_container_labels_traefik_docker_network: "{{ notfellchen_container_labels_traefik_docker_network }}"
notfellchen_sws_container_labels_traefik_entrypoints: "{{ notfellchen_container_labels_traefik_entrypoints }}"
notfellchen_sws_container_labels_traefik_tls_certResolver: "{{ notfellchen_container_labels_traefik_tls_certResolver }}"

# role-specific:postgres
notfellchen_database_host: "{{ postgres_identifier if postgres_enabled else '' }}"
notfellchen_database_port: "{{ '5432' if postgres_enabled else '' }}"
notfellchen_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.nf', rounds=655555) | to_uuid }}"
notfellchen_database_username: "notfellchen"
# /role-specific:postgres

# role-specific:traefik
notfellchen_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
notfellchen_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /notfellchen                                                         #
#                                                                      #
########################################################################
# /role-specific:notfellchen


# role-specific:ntfy
########################################################################
#                                                                      #
# ntfy                                                                 #
#                                                                      #
########################################################################

ntfy_enabled: false

ntfy_identifier: "{{ mash_playbook_service_identifier_prefix }}ntfy"

ntfy_uid: "{{ mash_playbook_uid }}"
ntfy_gid: "{{ mash_playbook_gid }}"

ntfy_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}ntfy"

ntfy_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and ntfy_smtp_sender_addr_host == exim_relay_identifier | default('mash-exim-relay') and ntfy_container_network != exim_relay_container_network) else [])
  }}

ntfy_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
ntfy_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

ntfy_visitor_request_limit_exempt_hosts_hostnames_auto: |
  {{
    [ntfy_hostname]
  }}

# role-specific:exim_relay
ntfy_smtp_sender_enabled: "{{ exim_relay_enabled }}"
ntfy_smtp_sender_addr_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
ntfy_smtp_sender_addr_port: 8025
ntfy_smtp_sender_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:traefik
ntfy_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
ntfy_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /ntfy                                                                #
#                                                                      #
########################################################################
# /role-specific:ntfy


# role-specific:outline
########################################################################
#                                                                      #
# outline                                                              #
#                                                                      #
########################################################################

outline_enabled: false

outline_identifier: "{{ mash_playbook_service_identifier_prefix }}outline"

outline_uid: "{{ mash_playbook_uid }}"
outline_gid: "{{ mash_playbook_gid }}"

outline_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}outline"

outline_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and outline_database_hostname == postgres_identifier else [])
  }}

outline_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and outline_database_hostname == postgres_identifier and outline_container_network != postgres_container_network else [])
  }}

outline_environment_variable_utils_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'utils.out', rounds=655555) | to_uuid }}"

outline_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
outline_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
outline_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
outline_database_port: "{{ '5432' if postgres_enabled else '' }}"
outline_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.out', rounds=655555) | to_uuid }}"
outline_database_sslmode: "{{ 'disable' if postgres_enabled and outline_database_hostname == postgres_identifier else 'prefer' }}"
# /role-specific:postgres

# role-specific:traefik
outline_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
outline_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /outline                                                             #
#                                                                      #
########################################################################
# /role-specific:outline



# role-specific:oauth2_proxy
########################################################################
#                                                                      #
# oauth2_proxy                                                         #
#                                                                      #
########################################################################

oauth2_proxy_enabled: false

oauth2_proxy_identifier: "{{ mash_playbook_service_identifier_prefix }}oauth2-proxy"

oauth2_proxy_uid: "{{ mash_playbook_uid }}"
oauth2_proxy_gid: "{{ mash_playbook_gid }}"

oauth2_proxy_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}oauth2-proxy"

oauth2_proxy_container_network: "{{ (mash_playbook_reverse_proxyable_services_additional_network if mash_playbook_traefik_labels_enabled else '') | default(oauth2_proxy_identifier) }}"

oauth2_proxy_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
oauth2_proxy_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
oauth2_proxy_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
oauth2_proxy_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /oauth2_proxy                                                        #
#                                                                      #
########################################################################
# /role-specific:oauth2_proxy



# role-specific:overseerr
########################################################################
#                                                                      #
# overseerr                                                            #
#                                                                      #
########################################################################

overseerr_enabled: false

overseerr_identifier: "{{ mash_playbook_service_identifier_prefix }}overseerr"

overseerr_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}overseerr"

overseerr_uid: "{{ mash_playbook_uid }}"
overseerr_gid: "{{ mash_playbook_gid }}"

overseerr_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

overseerr_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
overseerr_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
overseerr_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
overseerr_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /overseerr                                                           #
#                                                                      #
########################################################################
# /role-specific:overseerr



# role-specific:owncast
########################################################################
#                                                                      #
# owncast                                                              #
#                                                                      #
########################################################################

owncast_enabled: false

owncast_identifier: "{{ mash_playbook_service_identifier_prefix }}owncast"

owncast_uid: "{{ mash_playbook_uid }}"
owncast_gid: "{{ mash_playbook_gid }}"

owncast_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}owncast"

owncast_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

owncast_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
owncast_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
owncast_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
owncast_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /owncast                                                             #
#                                                                      #
########################################################################
# /role-specific:owncast



# role-specific:oxitraffic
########################################################################
#                                                                      #
# oxitraffic                                                           #
#                                                                      #
########################################################################

oxitraffic_enabled: false

oxitraffic_identifier: "{{ mash_playbook_service_identifier_prefix }}oxitraffic"

oxitraffic_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}oxitraffic"

oxitraffic_uid: "{{ mash_playbook_uid }}"
oxitraffic_gid: "{{ mash_playbook_gid }}"

oxitraffic_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and oxitraffic_database_hostname == postgres_identifier else [])
  }}

oxitraffic_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and oxitraffic_database_hostname == postgres_identifier and oxitraffic_container_network != postgres_container_network else [])
  }}

oxitraffic_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
oxitraffic_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
oxitraffic_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
oxitraffic_database_port: "{{ '5432' if postgres_enabled else '' }}"
oxitraffic_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.oxitraffic', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
oxitraffic_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
oxitraffic_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /oxitraffic                                                          #
#                                                                      #
########################################################################
# /role-specific:oxitraffic


# role-specific:paperless
########################################################################
#                                                                      #
# paperless                                                            #
#                                                                      #
########################################################################

paperless_enabled: false

paperless_identifier: "{{ mash_playbook_service_identifier_prefix }}paperless"

paperless_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}paperless"

paperless_uid: "{{ mash_playbook_uid }}"
paperless_gid: "{{ mash_playbook_gid }}"

paperless_secret_key: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'paperless.secret', rounds=655555) | to_uuid }}"

paperless_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and paperless_database_hostname == postgres_identifier else [])
  }}

paperless_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and paperless_database_hostname == postgres_identifier and paperless_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and paperless_email_host == exim_relay_identifier | default('mash-exim-relay') and paperless_container_network != exim_relay_container_network) else [])
  }}

paperless_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
paperless_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
paperless_email_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
paperless_email_port: "{{ 8025 if exim_relay_enabled else '' }}"
paperless_email_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
paperless_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
paperless_database_username: "paperless"
paperless_database_port: "{{ '5432' if postgres_enabled else '' }}"
paperless_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.paperless', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
paperless_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
paperless_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /paperless                                                           #
#                                                                      #
########################################################################
# /role-specific:paperless



# role-specific:peertube
########################################################################
#                                                                      #
# peertube                                                             #
#                                                                      #
########################################################################

peertube_enabled: false

peertube_identifier: "{{ mash_playbook_service_identifier_prefix }}peertube"

peertube_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}peertube"

peertube_uid: "{{ mash_playbook_uid }}"
peertube_gid: "{{ mash_playbook_gid }}"

peertube_container_additional_networks_auto: |
  {{
    (
      ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
      +
      ([postgres_container_network] if postgres_enabled and peertube_config_database_hostname == postgres_identifier and peertube_container_network != postgres_container_network else [])
      +
      ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and peertube_config_smtp_hostname == exim_relay_identifier | default('mash-exim-relay') and peertube_container_network != exim_relay_container_network) else [])
    ) | unique
  }}

peertube_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and peertube_config_database_hostname == postgres_identifier else [])
  }}

peertube_systemd_wanted_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and peertube_config_smtp_hostname == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

peertube_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
peertube_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
peertube_config_smtp_hostname: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
peertube_config_smtp_port: "{{ 8025 if exim_relay_enabled else '' }}"
peertube_config_smtp_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
peertube_config_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
peertube_config_database_port: "{{ '5432' if postgres_enabled else '' }}"
peertube_config_database_username: peertube
peertube_config_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.peertube', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
peertube_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
peertube_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /peertube                                                            #
#                                                                      #
########################################################################
# /role-specific:peertube


# role-specific:plausible
########################################################################
#                                                                      #
# plausible                                                            #
#                                                                      #
########################################################################

plausible_enabled: false

plausible_identifier: "{{ mash_playbook_service_identifier_prefix }}plausible"

plausible_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}plausible"

plausible_uid: "{{ mash_playbook_uid }}"
plausible_gid: "{{ mash_playbook_gid }}"

plausible_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and plausible_database_hostname == postgres_identifier else [])
    +
    ([clickhouse_identifier ~ '.service'] if clickhouse_enabled | default(false) and plausible_clickhouse_database_hostname == clickhouse_identifier| default('mash-clickhouse') else [])
  }}

plausible_systemd_wanted_systemd_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and plausible_environment_variable_smtp_host_addr == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

plausible_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and plausible_database_hostname == postgres_identifier and plausible_container_network != postgres_container_network else [])
    +
    ([clickhouse_container_network | default('mash-clickhouse')] if (clickhouse_enabled | default(false) and plausible_clickhouse_database_hostname == clickhouse_identifier | default('mash-clickhouse') and plausible_container_network != clickhouse_container_network | default('mash-clickhouse')) else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and plausible_environment_variable_smtp_host_addr == exim_relay_identifier | default('mash-exim-relay') and plausible_container_network != exim_relay_container_network) else [])
  }}

plausible_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
plausible_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:clickhouse
plausible_clickhouse_database_hostname: "{{ clickhouse_identifier if clickhouse_enabled else '' }}"
plausible_clickhouse_database_password: "{{ ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'plaus.clk.db', rounds=655555) | to_uuid) if clickhouse_enabled else '' }}"
# /role-specific:clickhouse

# role-specific:exim_relay
# As of 2024-06-28, only `Bamboo.SMTPAdapter` behaves well when no SMTP username/password AUTH is required (as is the case for exim-relay).
# The Bamboo.Mua SMTP adapter is more modern, but always sends authentication, even when the SMTP user is empty.
plausible_environment_variable_mailer_adapter: "{{ 'Bamboo.SMTPAdapter' if exim_relay_enabled else 'Bamboo.LocalAdapter' }}"
plausible_environment_variable_mailer_email: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
plausible_environment_variable_smtp_host_addr: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
plausible_environment_variable_smtp_host_port: "{{ 8025 if exim_relay_enabled else '587' }}"
plausible_environment_variable_smtp_host_ssl_enabled: false
# /role-specific:exim_relay

# role-specific:postgres
plausible_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
plausible_database_password: "{{ ('%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'plausible.db', rounds=655555) | to_uuid) if postgres_enabled else '' }}"
# /role-specific:postgres

# role-specific:traefik
plausible_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
plausible_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /plausible                                                           #
#                                                                      #
########################################################################
# /role-specific:plausible



# role-specific:postgis
########################################################################
#                                                                      #
# postgis                                                              #
#                                                                      #
########################################################################

postgis_enabled: false

postgis_identifier: "{{ mash_playbook_service_identifier_prefix }}postgis"

postgis_architecture: "{{ mash_playbook_architecture }}"

postgis_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}postgis"

postgis_uid: "{{ mash_playbook_uid }}"
postgis_gid: "{{ mash_playbook_gid }}"

postgis_systemd_services_to_stop_for_maintenance_list: |
  {{
    ([(mobilizon_identifier + '.service')] if mobilizon_enabled else [])
  }}

postgis_managed_databases_auto: |
  {{
    ([{
      'name': mobilizon_database_name,
      'username': mobilizon_database_username,
      'password': mobilizon_database_password,
    }] if mobilizon_enabled and mobilizon_database_type == 'postgis' and mobilizon_database_hostname == postgis_identifier else [])
  }}

########################################################################
#                                                                      #
# /postgis                                                             #
#                                                                      #
########################################################################
# /role-specific:postgis




# role-specific:prometheus_postgres_exporter
########################################################################
#                                                                      #
# prometheus_postgres_exporter                                         #
#                                                                      #
########################################################################

prometheus_postgres_exporter_enabled: false

prometheus_postgres_exporter_identifier: "{{ mash_playbook_service_identifier_prefix }}prometheus-postgres-exporter"

prometheus_postgres_exporter_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
prometheus_postgres_exporter_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ prometheus_postgres_exporter_identifier }}"

prometheus_postgres_exporter_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}prometheus-postgres-exporter"

prometheus_postgres_exporter_uid: "{{ mash_playbook_uid }}"
prometheus_postgres_exporter_gid: "{{ mash_playbook_gid }}"

prometheus_postgres_exporter_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and prometheus_postgres_exporter_database_hostname == postgres_identifier and prometheus_postgres_exporter_container_network != postgres_container_network else [])
  }}

prometheus_postgres_exporter_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled else [])
  }}

prometheus_postgres_exporter_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
prometheus_postgres_exporter_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
prometheus_postgres_exporter_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and prometheus_postgres_exporter_hostname | length > 0 }}"
prometheus_postgres_exporter_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
prometheus_postgres_exporter_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
prometheus_postgres_exporter_database_username: prometheus_postgres_exporter
prometheus_postgres_exporter_database_password: "{{ postgres_connection_password if postgres_enabled else '' }}"
prometheus_postgres_exporter_database_port: "{{ postgres_connection_port if postgres_enabled else 5432 }}"
prometheus_postgres_exporter_database_ssl: false
# /role-specific:postgres

# role-specific:traefik
prometheus_postgres_exporter_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
prometheus_postgres_exporter_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /prometheus_postgres_exporter                                        #
#                                                                      #
########################################################################
# /role-specific:prometheus_postgres_exporter



# role-specific:prometheus
########################################################################
#                                                                      #
# prometheus                                                           #
#                                                                      #
########################################################################

prometheus_enabled: false

prometheus_identifier: "{{ mash_playbook_service_identifier_prefix }}prometheus"

prometheus_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}prometheus"

prometheus_uid: "{{ mash_playbook_uid }}"
prometheus_gid: "{{ mash_playbook_gid }}"

prometheus_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
prometheus_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and prometheus_hostname | length > 0 }}"
prometheus_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
prometheus_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
prometheus_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /prometheus                                                          #
#                                                                      #
########################################################################
# /role-specific:prometheus



# role-specific:prometheus_blackbox_exporter
########################################################################
#                                                                      #
# prometheus_blackbox_exporter                                         #
#                                                                      #
########################################################################

prometheus_blackbox_exporter_enabled: false

prometheus_blackbox_exporter_identifier: "{{ mash_playbook_service_identifier_prefix }}prometheus-blackbox-exporter"

prometheus_blackbox_exporter_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
prometheus_blackbox_exporter_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ prometheus_blackbox_exporter_identifier }}"

prometheus_blackbox_exporter_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}prometheus-blackbox-exporter"

prometheus_blackbox_exporter_uid: "{{ mash_playbook_uid }}"
prometheus_blackbox_exporter_gid: "{{ mash_playbook_gid }}"

prometheus_blackbox_exporter_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
prometheus_blackbox_exporter_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and prometheus_blackbox_exporter_hostname }}"
prometheus_blackbox_exporter_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

prometheus_blackbox_exporter_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
prometheus_blackbox_exporter_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

# role-specific:traefik
prometheus_blackbox_exporter_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
prometheus_blackbox_exporter_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /prometheus_blackbox_exporter                                        #
#                                                                      #
########################################################################
# /role-specific:prometheus_blackbox_exporter



# role-specific:prometheus_ssh_exporter
########################################################################
#                                                                      #
# prometheus_ssh_exporter                                              #
#                                                                      #
########################################################################

prometheus_ssh_exporter_enabled: false

prometheus_ssh_exporter_identifier: "{{ mash_playbook_service_identifier_prefix }}prometheus-ssh-exporter"

prometheus_ssh_exporter_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
prometheus_ssh_exporter_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ prometheus_ssh_exporter_identifier }}"

prometheus_ssh_exporter_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}prometheus-ssh-exporter"

prometheus_ssh_exporter_uid: "{{ mash_playbook_uid }}"
prometheus_ssh_exporter_gid: "{{ mash_playbook_gid }}"

prometheus_ssh_exporter_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

prometheus_ssh_exporter_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
prometheus_ssh_exporter_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
prometheus_ssh_exporter_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and prometheus_ssh_exporter_hostname }}"
prometheus_ssh_exporter_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
prometheus_ssh_exporter_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
prometheus_ssh_exporter_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /prometheus_ssh_exporter                                             #
#                                                                      #
########################################################################
# /role-specific:prometheus_ssh_exporter



# role-specific:prometheus_node_exporter
########################################################################
#                                                                      #
# prometheus_node_exporter                                             #
#                                                                      #
########################################################################

prometheus_node_exporter_enabled: false

prometheus_node_exporter_identifier: "{{ mash_playbook_service_identifier_prefix }}prometheus-node-exporter"

prometheus_node_exporter_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
prometheus_node_exporter_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ prometheus_node_exporter_identifier }}"

prometheus_node_exporter_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}prometheus-node-exporter"

prometheus_node_exporter_uid: "{{ mash_playbook_uid }}"
prometheus_node_exporter_gid: "{{ mash_playbook_gid }}"

prometheus_node_exporter_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
prometheus_node_exporter_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled and prometheus_node_exporter_hostname }}"
prometheus_node_exporter_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

prometheus_node_exporter_container_labels_metrics_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
prometheus_node_exporter_container_labels_metrics_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

prometheus_node_exporter_process_extra_arguments:
  - "--collector.disable-defaults"
  - "--collector.cpu"
  - "--collector.filesystem"
  - "--collector.meminfo"
  - "--collector.systemd"
  - "--collector.uname"

prometheus_node_exporter_container_extra_arguments:
  - "--security-opt apparmor=unconfined"
  - "--mount type=bind,src=/var/run/dbus/system_bus_socket,dst=/var/run/dbus/system_bus_socket,ro,bind-propagation=rslave"

# role-specific:traefik
prometheus_node_exporter_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
prometheus_node_exporter_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /prometheus_node_exporter                                            #
#                                                                      #
########################################################################
# /role-specific:prometheus_node_exporter



# role-specific:promtail
########################################################################
#                                                                      #
# promtail                                                             #
#                                                                      #
########################################################################

promtail_enabled: false

promtail_identifier: "{{ mash_playbook_service_identifier_prefix }}promtail"

promtail_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}promtail"

promtail_uid: "{{ mash_playbook_uid }}"
promtail_gid: "{{ mash_playbook_gid }}"

promtail_container_labels_metrics_enabled: "{{ prometheus_enabled | default(false) or mash_playbook_metrics_exposure_enabled }}"
promtail_container_labels_metrics_hostname: "{{ mash_playbook_metrics_exposure_hostname }}"
promtail_container_labels_metrics_path_prefix: "{{ mash_playbook_metrics_exposure_path_prefix }}/{{ promtail_identifier }}"
promtail_container_labels_metrics_traefik_middleware_basic_auth_enabled: "{{ mash_playbook_metrics_exposure_http_basic_auth_enabled }}"
promtail_container_labels_metrics_traefik_middleware_basic_auth_users: "{{ mash_playbook_metrics_exposure_http_basic_auth_users }}"

promtail_container_additional_networks_auto: |
  {{
    (
      ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
      +
      ([loki_container_network] if (loki_enabled | default(false) and loki_container_network | default('') != promtail_container_network) else [])
    ) | unique
  }}

# Only enable Traefik labels if a hostname is set (indicating that this will be exposed publicly)
promtail_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
promtail_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:loki
promtail_config_clients_auto: |
  {{
    ([{
      'url': ('http://' + loki_identifier + ':' + (loki_server_http_listen_port | string) + '/loki/api/v1/push'),
      'tenant_id': 'mash',
    }] if loki_enabled else [])
  }}
# /role-specific:loki

# role-specific:traefik
promtail_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
promtail_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /promtail                                                            #
#                                                                      #
########################################################################
# /role-specific:promtail



# role-specific:qbittorrent
########################################################################
#                                                                      #
# qbittorrent                                                          #
#                                                                      #
########################################################################

qbittorrent_enabled: false

qbittorrent_identifier: "{{ mash_playbook_service_identifier_prefix }}qbittorrent"

qbittorrent_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}qbittorrent"

qbittorrent_uid: "{{ mash_playbook_uid }}"
qbittorrent_gid: "{{ mash_playbook_gid }}"

qbittorrent_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

qbittorrent_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
qbittorrent_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
qbittorrent_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
qbittorrent_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /qbittorrent                                                         #
#                                                                      #
########################################################################
# /role-specific:qbittorrent



# role-specific:radarr
########################################################################
#                                                                      #
# radarr                                                               #
#                                                                      #
########################################################################

radarr_enabled: false

radarr_identifier: "{{ mash_playbook_service_identifier_prefix }}radarr"

radarr_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}radarr"

radarr_uid: "{{ mash_playbook_uid }}"
radarr_gid: "{{ mash_playbook_gid }}"

radarr_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

radarr_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
radarr_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
radarr_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
radarr_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /radarr                                                              #
#                                                                      #
########################################################################
# /role-specific:radarr



# role-specific:radicale
########################################################################
#                                                                      #
# radicale                                                             #
#                                                                      #
########################################################################

radicale_enabled: false

radicale_identifier: "{{ mash_playbook_service_identifier_prefix }}radicale"

radicale_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}radicale"

radicale_uid: "{{ mash_playbook_uid }}"
radicale_gid: "{{ mash_playbook_gid }}"

radicale_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

radicale_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
radicale_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
radicale_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
radicale_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /radicale                                                            #
#                                                                      #
########################################################################
# /role-specific:radicale



# role-specific:readeck
########################################################################
#                                                                      #
# readeck                                                              #
#                                                                      #
########################################################################

readeck_enabled: false

readeck_identifier: "{{ mash_playbook_service_identifier_prefix }}readeck"

readeck_uid: "{{ mash_playbook_uid }}"
readeck_gid: "{{ mash_playbook_gid }}"

readeck_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}readeck"

readeck_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

readeck_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
readeck_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
readeck_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
readeck_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /readeck                                                             #
#                                                                      #
########################################################################
# /role-specific:readeck



# role-specific:redmine
########################################################################
#                                                                      #
# redmine                                                              #
#                                                                      #
########################################################################

redmine_enabled: false

redmine_identifier: "{{ mash_playbook_service_identifier_prefix }}redmine"

redmine_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}redmine"

redmine_uid: "{{ mash_playbook_uid }}"
redmine_gid: "{{ mash_playbook_gid }}"

redmine_secret_key_base: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.base', rounds=655555) | to_uuid }}"
redmine_secret_token: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.token', rounds=655555) | to_uuid }}"
redmine_database_cipher_key: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.cipherkey', rounds=655555) | to_uuid }}"

redmine_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and redmine_database_hostname == postgres_identifier else [])
  }}

redmine_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and redmine_database_hostname == postgres_identifier and redmine_container_network != postgres_container_network else [])
  }}

redmine_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
redmine_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

redmine_database_type: "{{ 'postgresql' if postgres_enabled else 'sqlite3' }}"

# role-specific:postgres
redmine_database_hostname: "{{ postgres_connection_hostname if postgres_enabled else '' }}"
redmine_database_username: "redmine"
redmine_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'redmine.db', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
redmine_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
redmine_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /redmine                                                             #
#                                                                      #
########################################################################
# /role-specific:redmine



# role-specific:redis
########################################################################
#                                                                      #
# redis                                                                #
#                                                                      #
########################################################################

redis_enabled: false

redis_identifier: "{{ mash_playbook_service_identifier_prefix }}redis"

redis_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}redis"

redis_uid: "{{ mash_playbook_uid }}"
redis_gid: "{{ mash_playbook_gid }}"

########################################################################
#                                                                      #
# /redis                                                               #
#                                                                      #
########################################################################
# /role-specific:redis



# role-specific:roundcube
########################################################################
#                                                                      #
# roundcube                                                            #
#                                                                      #
########################################################################

roundcube_enabled: false

roundcube_identifier: "{{ mash_playbook_service_identifier_prefix }}roundcube"

roundcube_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}roundcube"

roundcube_uid: "0"
roundcube_gid: "0"

roundcube_database_type: "{{ 'postgresql' if postgres_enabled else 'sqlite' }}"

roundcube_systemd_required_systemd_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and roundcube_database_hostname == postgres_identifier else [])
  }}

roundcube_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and roundcube_database_hostname == postgres_identifier and roundcube_container_network != postgres_container_network else [])
  }}

roundcube_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
roundcube_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
roundcube_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
roundcube_database_port: "{{ '5432' if postgres_enabled else '' }}"
roundcube_database_name: "{{ 'roundcube' if postgres_enabled else '' }}"
roundcube_database_username: "{{ 'roundcube' if postgres_enabled else '' }}"
roundcube_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.roundcube', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
roundcube_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
roundcube_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /roundcube                                                           #
#                                                                      #
########################################################################
# /role-specific:roundcube



# role-specific:rumqttd
########################################################################
#                                                                      #
# rumqttd                                                              #
#                                                                      #
########################################################################

rumqttd_enabled: false

rumqttd_identifier: "{{ mash_playbook_service_identifier_prefix }}rumqttd"

rumqttd_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}rumqttd"

rumqttd_uid: "{{ mash_playbook_uid }}"
rumqttd_gid: "{{ mash_playbook_gid }}"

########################################################################
#                                                                      #
# /rumqttd                                                             #
#                                                                      #
########################################################################
# /role-specific:rumqttd



# role-specific:searxng
########################################################################
#                                                                      #
# searxng                                                              #
#                                                                      #
########################################################################

searxng_enabled: false

searxng_identifier: "{{ mash_playbook_service_identifier_prefix }}searxng"

searxng_uid: "{{ mash_playbook_uid }}"
searxng_gid: "{{ mash_playbook_gid }}"

searxng_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}searxng"

searxng_systemd_required_systemd_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
  }}

searxng_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

searxng_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
searxng_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
searxng_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
searxng_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /searxng                                                             #
#                                                                      #
########################################################################
# /role-specific:searxng



# role-specific:semaphore
########################################################################
#                                                                      #
# semaphore                                                            #
#                                                                      #
########################################################################

semaphore_enabled: false

semaphore_identifier: "{{ mash_playbook_service_identifier_prefix }}semaphore"

semaphore_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}semaphore"

semaphore_uid: "{{ mash_playbook_uid }}"
semaphore_gid: "{{ mash_playbook_gid }}"

semaphore_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and semaphore_database_host == postgres_identifier else [])
  }}

semaphore_container_additional_networks: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and semaphore_database_host == postgres_identifier and semaphore_container_network != postgres_container_network else [])
  }}

semaphore_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
semaphore_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:postgres
semaphore_database_host: "{{ postgres_identifier if postgres_enabled else '' }}"
semaphore_database_port: "{{ '5432' if postgres_enabled else '' }}"
semaphore_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.semaphore', rounds=655555) | to_uuid }}"
semaphore_database_username: "{{ semaphore_identifier }}"
# /role-specific:postgres

# role-specific:traefik
semaphore_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
semaphore_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /semaphore                                                           #
#                                                                      #
########################################################################
# /role-specific:semaphore



# role-specific:send
########################################################################
#                                                                      #
# send                                                                 #
#                                                                      #
########################################################################

send_enabled: false

send_identifier: "{{ mash_playbook_service_identifier_prefix }}send"

send_uid: "{{ mash_playbook_uid }}"
send_gid: "{{ mash_playbook_gid }}"

send_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}send"

send_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

# Required for a Redis / KeyDB / Valkey instance
send_environment_variable_redis_host: "{{ send_config_redis_hostname }}"

send_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
send_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
send_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
send_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /send                                                                #
#                                                                      #
########################################################################
# /role-specific:send



# role-specific:soft_serve
########################################################################
#                                                                      #
# soft-serve                                                           #
#                                                                      #
########################################################################

soft_serve_enabled: false

soft_serve_identifier: "{{ mash_playbook_service_identifier_prefix }}soft-serve"

soft_serve_uid: "{{ mash_playbook_uid }}"
soft_serve_gid: "{{ mash_playbook_gid }}"

soft_serve_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}soft-serve"

########################################################################
#                                                                      #
# /soft-serve                                                          #
#                                                                      #
########################################################################
# /role-specific:soft_serve



# role-specific:sonarr
########################################################################
#                                                                      #
# sonarr                                                               #
#                                                                      #
########################################################################

sonarr_enabled: false

sonarr_identifier: "{{ mash_playbook_service_identifier_prefix }}sonarr"

sonarr_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}sonarr"

sonarr_uid: "{{ mash_playbook_uid }}"
sonarr_gid: "{{ mash_playbook_gid }}"

sonarr_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

sonarr_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
sonarr_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
sonarr_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
sonarr_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /sonarr                                                              #
#                                                                      #
########################################################################
# /role-specific:sonarr



# role-specific:stirling_pdf
########################################################################
#                                                                      #
# stirling-pdf                                                         #
#                                                                      #
########################################################################

stirling_pdf_enabled: false

stirling_pdf_identifier: "{{ mash_playbook_service_identifier_prefix }}stirling-pdf"

stirling_pdf_uid: "{{ mash_playbook_uid }}"
stirling_pdf_gid: "{{ mash_playbook_gid }}"

stirling_pdf_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}stirling-pdf"

stirling_pdf_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

stirling_pdf_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
stirling_pdf_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
stirling_pdf_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
stirling_pdf_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /stirling-pdf                                                        #
#                                                                      #
########################################################################
# /role-specific:stirling_pdf



# role-specific:syncthing
########################################################################
#                                                                      #
# syncthing                                                            #
#                                                                      #
########################################################################

syncthing_enabled: false

syncthing_identifier: "{{ mash_playbook_service_identifier_prefix }}syncthing"

syncthing_uid: "{{ mash_playbook_uid }}"
syncthing_gid: "{{ mash_playbook_gid }}"

syncthing_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}syncthing"

syncthing_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

syncthing_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
syncthing_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
syncthing_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
syncthing_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /syncthing                                                           #
#                                                                      #
########################################################################
# /role-specific:syncthing



# role-specific:tandoor
########################################################################
#                                                                      #
# tandoor                                                              #
#                                                                      #
########################################################################

tandoor_enabled: false

tandoor_identifier: "{{ mash_playbook_service_identifier_prefix }}tandoor"

tandoor_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}tandoor"

tandoor_uid: "{{ mash_playbook_uid }}"
tandoor_gid: "{{ mash_playbook_gid }}"

tandoor_systemd_required_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and tandoor_database_hostname == postgres_identifier else [])
  }}

tandoor_systemd_wanted_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and tandoor_email_host == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

tandoor_api_container_additional_networks_auto: |
  {{
    (
      ([postgres_container_network] if postgres_enabled and tandoor_database_hostname == postgres_identifier and tandoor_container_network != postgres_container_network else [])
      +
      ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and tandoor_email_host == exim_relay_identifier | default('mash-exim-relay') and tandoor_container_network != exim_relay_container_network) else [])
    ) | unique
  }}

tandoor_frontend_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

tandoor_environment_variable_secret: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.tandoor', rounds=655555) | to_uuid }}"

tandoor_frontend_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
tandoor_frontend_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:exim_relay
tandoor_email_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
tandoor_email_port: "{{ 8025 if exim_relay_enabled else '' }}"
tandoor_default_from_email: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
# /role-specific:exim_relay

# role-specific:postgres
tandoor_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
tandoor_database_port: "{{ '5432' if postgres_enabled else '' }}"
tandoor_database_username: "tandoor"
tandoor_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.tandoor', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
tandoor_frontend_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
tandoor_frontend_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /tandoor                                                             #
#                                                                      #
########################################################################
# /role-specific:tandoor



# role-specific:telegraf
########################################################################
#                                                                      #
# telegraf                                                             #
#                                                                      #
########################################################################

telegraf_enabled: false

telegraf_identifier: "{{ mash_playbook_service_identifier_prefix }}telegraf"

telegraf_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}telegraf"

telegraf_uid: "{{ mash_playbook_uid }}"
telegraf_gid: "{{ mash_playbook_gid }}"

telegraf_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([(influxdb_identifier + '.service')] if influxdb_enabled else [])
  }}


########################################################################
#                                                                      #
# /telegraf                                                            #
#                                                                      #
########################################################################
# /role-specific:telegraf



# role-specific:tsdproxy
########################################################################
#                                                                      #
# tsdproxy                                                             #
#                                                                      #
########################################################################

tsdproxy_enabled: false

tsdproxy_identifier: "{{ mash_playbook_service_identifier_prefix }}tsdproxy"

tsdproxy_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}tsdproxy"

tsdproxy_uid: "{{ mash_playbook_uid }}"
tsdproxy_gid: "{{ mash_playbook_gid }}"

tsdproxy_container_additional_networks_auto: |
  {{
    ([container_socket_proxy_container_network] if container_socket_proxy_enabled | default(false) else [])
  }}

tsdproxy_systemd_required_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([container_socket_proxy_identifier + '.service'] if container_socket_proxy_enabled | default(false) else [])
  }}

# role-specific:container_socket_proxy
tsdproxy_docker_endpoint_is_unix_socket: "{{ false if container_socket_proxy_enabled else true }}"
tsdproxy_docker_endpoint: "{{ container_socket_proxy_endpoint if container_socket_proxy_enabled == true and tsdproxy_enabled == true else 'unix:///var/run/docker.sock' }}"
# TSDProxy needs access to the Docker Networks and images to work
container_socket_proxy_api_network_enabled: "{{ true if tsdproxy_docker_endpoint == container_socket_proxy_endpoint else false }}"
container_socket_proxy_api_images_enabled: "{{ true if tsdproxy_docker_endpoint == container_socket_proxy_endpoint else false }}"
# /role-specific:container_socket_proxy

########################################################################
#                                                                      #
# /tsdproxy                                                            #
#                                                                      #
########################################################################
# /role-specific:tsdproxy



# role-specific:valkey
########################################################################
#                                                                      #
# valkey                                                               #
#                                                                      #
########################################################################

valkey_enabled: false

valkey_identifier: "{{ mash_playbook_service_identifier_prefix }}valkey"

valkey_uid: "{{ mash_playbook_uid }}"
valkey_gid: "{{ mash_playbook_gid }}"

valkey_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}valkey"

valkey_arch: "{{ mash_playbook_architecture }}"

########################################################################
#                                                                      #
# /valkey                                                              #
#                                                                      #
########################################################################
# /role-specific:valkey



# role-specific:vaultwarden
########################################################################
#                                                                      #
# vaultwarden                                                          #
#                                                                      #
########################################################################

vaultwarden_enabled: false

vaultwarden_identifier: "{{ mash_playbook_service_identifier_prefix }}vaultwarden"

vaultwarden_uid: "{{ mash_playbook_uid }}"
vaultwarden_gid: "{{ mash_playbook_gid }}"

vaultwarden_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}vaultwarden"

vaultwarden_systemd_required_systemd_services_list_auto: |
  {{
    ([postgres_identifier ~ '.service'] if postgres_enabled and vaultwarden_database_hostname == postgres_identifier else [])
  }}

vaultwarden_systemd_wanted_systemd_services_list_auto: |
  {{
    ([(exim_relay_identifier | default('mash-exim-relay')) ~ '.service'] if (exim_relay_enabled | default(false) and vaultwarden_config_smtp_host == exim_relay_identifier | default('mash-exim-relay')) else [])
  }}

vaultwarden_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([postgres_container_network] if postgres_enabled and vaultwarden_database_hostname == postgres_identifier and vaultwarden_container_network != postgres_container_network else [])
    +
    ([exim_relay_container_network | default('mash-exim-relay')] if (exim_relay_enabled | default(false) and vaultwarden_config_smtp_host == exim_relay_identifier | default('mash-exim-relay') and vaultwarden_container_network != exim_relay_container_network) else [])
  }}

vaultwarden_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
vaultwarden_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"
vaultwarden_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
vaultwarden_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

# role-specific:exim_relay
vaultwarden_config_smtp_from: "{{ exim_relay_sender_address if exim_relay_enabled else '' }}"
vaultwarden_config_smtp_host: "{{ exim_relay_identifier if exim_relay_enabled else '' }}"
vaultwarden_config_smtp_port: "{{ 8025 if exim_relay_enabled else '587' }}"
vaultwarden_config_smtp_security: "{{ 'off' if exim_relay_enabled else 'starttls' }}"
# /role-specific:exim_relay

# role-specific:postgres
vaultwarden_database_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
vaultwarden_database_port: "{{ '5432' if postgres_enabled else '' }}"
vaultwarden_database_username: "vaultwarden"
vaultwarden_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.vaultwarden', rounds=655555) | to_uuid }}"
# /role-specific:postgres

# role-specific:traefik
vaultwarden_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
vaultwarden_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /vaultwarden                                                         #
#                                                                      #
########################################################################
# /role-specific:vaultwarden



# role-specific:uptime_kuma
########################################################################
#                                                                      #
# uptime_kuma                                                          #
#                                                                      #
########################################################################

uptime_kuma_enabled: false

uptime_kuma_identifier: "{{ mash_playbook_service_identifier_prefix }}uptime-kuma"

uptime_kuma_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}uptime-kuma"

uptime_kuma_uid: "{{ mash_playbook_uid }}"
uptime_kuma_gid: "{{ mash_playbook_gid }}"

uptime_kuma_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

uptime_kuma_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
uptime_kuma_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
uptime_kuma_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
uptime_kuma_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /uptime_kuma                                                         #
#                                                                      #
########################################################################
# /role-specific:uptime_kuma



# role-specific:versatiles
########################################################################
#                                                                      #
# versatiles                                                          #
#                                                                      #
########################################################################

versatiles_enabled: false

versatiles_identifier: "{{ mash_playbook_service_identifier_prefix }}versatiles"

versatiles_uid: "{{ mash_playbook_uid }}"
versatiles_gid: "{{ mash_playbook_gid }}"

versatiles_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}versatiles"

versatiles_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

versatiles_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
versatiles_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
versatiles_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
versatiles_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /versatiles                                                         #
#                                                                      #
########################################################################
# /role-specific:versatiles



# role-specific:wetty
########################################################################
#                                                                      #
# wetty                                                                #
#                                                                      #
########################################################################

wetty_enabled: false

wetty_identifier: "{{ mash_playbook_service_identifier_prefix }}wetty"

wetty_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}wetty"

wetty_uid: "{{ mash_playbook_uid }}"
wetty_gid: "{{ mash_playbook_gid }}"

wetty_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

wetty_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
wetty_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
wetty_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
wetty_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /wetty                                                               #
#                                                                      #
########################################################################
# /role-specific:wetty



# role-specific:wg_easy
########################################################################
#                                                                      #
# wg-easy                                                              #
#                                                                      #
########################################################################

wg_easy_enabled: false

wg_easy_identifier: "{{ mash_playbook_service_identifier_prefix }}wg-easy"

wg_easy_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}wg-easy"

wg_easy_uid: "{{ mash_playbook_uid }}"
wg_easy_gid: "{{ mash_playbook_gid }}"

wg_easy_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

wg_easy_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
wg_easy_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
wg_easy_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
wg_easy_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /wg-easy                                                             #
#                                                                      #
########################################################################
# /role-specific:wg_easy



# role-specific:woodpecker_ci_server
########################################################################
#                                                                      #
# woodpecker-ci-server                                                 #
#                                                                      #
########################################################################

woodpecker_ci_server_enabled: false

woodpecker_ci_server_identifier: "{{ mash_playbook_service_identifier_prefix }}woodpecker-ci-server"

woodpecker_ci_server_uid: "{{ mash_playbook_uid }}"
woodpecker_ci_server_gid: "{{ mash_playbook_gid }}"

woodpecker_ci_server_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}woodpecker-ci/server"

woodpecker_ci_server_systemd_required_systemd_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([postgres_identifier ~ '.service'] if postgres_enabled and woodpecker_ci_server_database_datasource_hostname == postgres_identifier else [])
  }}

woodpecker_ci_server_container_additional_networks: |
  {{
    (
      ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
      +
      ([postgres_container_network] if postgres_enabled and woodpecker_ci_server_database_datasource_hostname == postgres_identifier and woodpecker_ci_server_container_network != postgres_container_network else [])
    ) | unique
  }}

woodpecker_ci_server_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
woodpecker_ci_server_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

woodpecker_ci_server_container_labels_traefik_compression_middleware_enabled: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_enabled }}"
woodpecker_ci_server_container_labels_traefik_compression_middleware_name: "{{ mash_playbook_reverse_proxy_traefik_middleware_compession_name if mash_playbook_reverse_proxy_traefik_middleware_compession_enabled else '' }}"

woodpecker_ci_server_database_driver: postgres
woodpecker_ci_server_database_datasource: "postgres://{{ woodpecker_ci_server_database_datasource_username }}:{{ woodpecker_ci_server_database_datasource_password }}@{{ woodpecker_ci_server_database_datasource_hostname }}:{{ woodpecker_ci_server_database_datasource_port }}/{{ woodpecker_ci_server_database_datasource_db_name }}?sslmode=disable"

# role-specific:postgres
woodpecker_ci_server_database_datasource_hostname: "{{ postgres_identifier if postgres_enabled else '' }}"
woodpecker_ci_server_database_datasource_port: "{{ '5432' if postgres_enabled else '' }}"
woodpecker_ci_server_database_datasource_username: woodpecker_ci_server
woodpecker_ci_server_database_datasource_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'woodpecker.ci', rounds=655555) | to_uuid }}"
woodpecker_ci_server_database_datasource_db_name: woodpecker_ci_server
# /role-specific:postgres

########################################################################
#                                                                      #
# /woodpecker-ci-server                                                #
#                                                                      #
########################################################################
# /role-specific:woodpecker_ci_server



# role-specific:woodpecker_ci_agent
########################################################################
#                                                                      #
# woodpecker-ci-agent                                                  #
#                                                                      #
########################################################################

woodpecker_ci_agent_enabled: false

woodpecker_ci_agent_identifier: "{{ mash_playbook_service_identifier_prefix }}woodpecker-ci-agent"

woodpecker_ci_agent_uid: "{{ mash_playbook_uid }}"
woodpecker_ci_agent_gid: "{{ mash_playbook_gid }}"

woodpecker_ci_agent_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}woodpecker-ci/agent"

woodpecker_ci_agent_systemd_required_systemd_services_list: |
  {{
    ([devture_systemd_docker_base_docker_service_name] if devture_systemd_docker_base_docker_service_name else [])
    +
    ([woodpecker_ci_server_identifier ~ '.service'] if woodpecker_ci_server_enabled else [])
  }}

woodpecker_ci_agent_container_additional_networks: |
  {{
    (
      ([woodpecker_ci_server_container_network] if woodpecker_ci_server_enabled and woodpecker_ci_server_container_network != woodpecker_ci_agent_container_network else [])
    ) | unique
  }}

woodpecker_ci_agent_config_server: "{{ (woodpecker_ci_server_identifier + ':' + woodpecker_ci_server_config_grpc_addr_port | string) if woodpecker_ci_agent_enabled else '' }}"

woodpecker_ci_agent_config_agent_secret: "{{ woodpecker_ci_server_config_agent_secret if woodpecker_ci_agent_enabled else '' }}"

########################################################################
#                                                                      #
# /woodpecker-ci-agent                                                 #
#                                                                      #
########################################################################
# /role-specific:woodpecker_ci_agent



# role-specific:wordpress
########################################################################
#                                                                      #
# wordpress                                                            #
#                                                                      #
########################################################################

wordpress_enabled: false

wordpress_identifier: "{{ mash_playbook_service_identifier_prefix }}wordpress"

wordpress_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}wordpress"

wordpress_uid: "{{ mash_playbook_uid }}"
wordpress_gid: "{{ mash_playbook_gid }}"

wordpress_systemd_required_systemd_services_list_auto: |
  {{
    ([(mariadb_identifier | default('mash-mariadb')) ~ '.service'] if mariadb_enabled | default(false) and wordpress_database_hostname == mariadb_identifier | default('mash-mariadb') else [])
  }}


wordpress_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([mariadb_identifier | default('mash-mariadb')] if mariadb_enabled | default(false) and wordpress_database_hostname == mariadb_identifier | default('mash-mariadb') and wordpress_container_network != mariadb_identifier | default('mash-mariadb') else [])
  }}

wordpress_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
wordpress_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:mariadb
wordpress_database_hostname: "{{ mariadb_identifier if mariadb_enabled | default(false) else '' }}"
wordpress_mysql_port: "{{ '3306' if mariadb_enabled | default(false) else '' }}"
wordpress_database_password: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.mariadb', rounds=655555) | to_uuid }}"
# /role-specific:mariadb

# role-specific:traefik
wordpress_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
wordpress_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /wordpress                                                           #
#                                                                      #
########################################################################
# /role-specific:wordpress



# role-specific:writefreely
########################################################################
#                                                                      #
# writefreely                                                          #
#                                                                      #
########################################################################

writefreely_enabled: false

writefreely_identifier: "{{ mash_playbook_service_identifier_prefix }}writefreely"

writefreely_uid: "{{ mash_playbook_uid }}"
writefreely_gid: "{{ mash_playbook_gid }}"

writefreely_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}writefreely"

writefreely_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
  }}

writefreely_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
writefreely_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:traefik
writefreely_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
writefreely_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /writefreely                                                         #
#                                                                      #
########################################################################
# /role-specific:writefreely



# role-specific:yourls
########################################################################
#                                                                      #
# yourls                                                               #
#                                                                      #
########################################################################

yourls_enabled: false

yourls_identifier: "{{ mash_playbook_service_identifier_prefix }}yourls"

yourls_uid: "{{ mash_playbook_uid }}"
yourls_gid: "{{ mash_playbook_gid }}"

yourls_base_path: "{{ mash_playbook_base_path }}/{{ mash_playbook_service_base_directory_name_prefix }}yourls"

yourls_systemd_required_systemd_services_list_auto: |
  {{
    ([mariadb_identifier ~ '.service'] if mariadb_enabled and yourls_environment_variable_db_host_name == mariadb_identifier else [])
  }}

yourls_container_additional_networks_auto: |
  {{
    ([mash_playbook_reverse_proxyable_services_additional_network] if mash_playbook_reverse_proxyable_services_additional_network else [])
    +
    ([mariadb_container_network] if mariadb_enabled | default(false) and yourls_environment_variable_db_host_name == mariadb_identifier and yourls_container_network != mariadb_container_network else [])
  }}

yourls_environment_variable_cookiekey: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'secret.yourls', rounds=655555) | to_uuid }}"

yourls_container_labels_traefik_enabled: "{{ mash_playbook_traefik_labels_enabled }}"
yourls_container_labels_traefik_docker_network: "{{ mash_playbook_reverse_proxyable_services_additional_network }}"

# role-specific:mariadb
yourls_environment_variable_db_user: "yourls"
yourls_environment_variable_db_pass: "{{ '%s' | format(mash_playbook_generic_secret_key) | password_hash('sha512', 'db.yourls', rounds=655555) | to_uuid }}"
yourls_environment_variable_db_host_name: "{{ mariadb_identifier if mariadb_enabled else '' }}"
# /role-specific:mariadb

# role-specific:traefik
yourls_container_labels_traefik_entrypoints: "{{ traefik_entrypoint_primary }}"
yourls_container_labels_traefik_tls_certResolver: "{{ traefik_certResolver_primary }}"
# /role-specific:traefik

########################################################################
#                                                                      #
# /yourls                                                              #
#                                                                      #
########################################################################
# /role-specific:yourls
